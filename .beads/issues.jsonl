{"id":"fabbro-0bl","title":"MAINT-002: Inject io.Writer for TUI error logging","description":"TUI writes errors directly to os.Stderr, making it harder to test.\n\n**Location:** internal/tui/tui.go#L204-L205\n\n**Fix:** Add logWriter io.Writer field to Model, default to os.Stderr, use in error handling.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:15.134759015-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:55:02.659287083-03:00","closed_at":"2026-01-14T13:55:02.659287083-03:00","close_reason":"Closed"}
{"id":"fabbro-0f3","title":"Prompt for confirmation before quitting the application.","description":"Prompt for confirmation before quitting the application.\n\n**Note:** This issue depends on fabbro-xtx which changes the quit mechanism to CTRL+C.\n\n## Implementation\n\nAfter fabbro-xtx is complete, add confirmation logic:\n1. On quit action, show \"Quit? (y/n)\" prompt\n2. If unsaved changes exist, show \"Unsaved changes! Quit anyway? (y/n)\"\n3. y/Y confirms, anything else cancels\n\n## Files\n\n- `internal/tui/tui.go` - add confirmation state and prompt rendering\n\n### Acceptance Criteria:\n- [ ] Quit action shows confirmation prompt\n- [ ] y/Y confirms quit\n- [ ] n/N or other input cancels and returns to editor\n- [ ] Unsaved changes trigger enhanced warning message\n\n### Verification Steps:\n1. Start fabbro, initiate quit - verify prompt appears\n2. Press n - verify returns to editor\n3. Press y - verify quits\n4. Make changes, initiate quit - verify unsaved warning shown","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:32:52.49326913-03:00","created_by":"charly vibes","updated_at":"2026-01-26T22:16:44.528800402-03:00","closed_at":"2026-01-26T22:16:44.528800402-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-0f3","depends_on_id":"fabbro-xtx","type":"blocks","created_at":"2026-01-24T21:20:37.861710091-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-0i6","title":"Improve annotation input: text wrapping and multiline support","description":"Two improvements to the annotation input prompt: 1) Wrap long text instead of horizontal scrolling 2) Enable Shift+Enter to insert newlines for multiline annotations. See specs/03_tui_interaction.feature scenarios 'Text input wraps when content is long' and 'Adding newlines in annotation input'.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-24T21:17:27.066663383-03:00","created_by":"charly vibes","updated_at":"2026-01-25T21:50:14.395379161-03:00","closed_at":"2026-01-25T21:50:14.395379161-03:00","close_reason":"Closed"}
{"id":"fabbro-128","title":"SEC-003: Add input size limits for review command","description":"io.ReadAll(stdin) and os.ReadFile() have no size limits. Huge inputs cause OOM.\n\n**Location:** cmd/fabbro/main.go#L82-L96\n\n**Fix:** Add maxInputBytes constant (10MB), use io.LimitReader for stdin, check file size before reading.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:17.572220806-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:47:53.60099862-03:00","closed_at":"2026-01-14T13:47:53.60099862-03:00","close_reason":"Closed"}
{"id":"fabbro-130","title":"Implement or remove shell completion command","description":"CORR-001: README documents 'fabbro completion' command but it's not implemented in main.go. Either implement cobra completion or update README to remove the reference.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.429540996-03:00","created_by":"charly vibes","updated_at":"2026-01-27T12:41:23.262856096-03:00","closed_at":"2026-01-27T12:41:23.262856096-03:00","close_reason":"Closed"}
{"id":"fabbro-1jz","title":"Improve session naming convention","description":"Sessions need clearer naming with prefix or intuitive convention. Research how beads and openspec handle naming for inspiration. Consider project prefix, date, or semantic names.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:42.324931322-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:11:00.766678885-03:00","closed_at":"2026-01-14T12:11:00.766678885-03:00","close_reason":"Session IDs now use YYYYMMDD-xxxx format (e.g., 20260114-373a)"}
{"id":"fabbro-1ps","title":"Phase 3: Handle save() error","description":"Change save() to return error, print to stderr on failure so user knows if work is lost.\n\nFiles: internal/tui/tui.go, internal/tui/tui_test.go\nSuccess: Save errors printed to stderr, test for error path\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-3","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.311626689-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:42:06.404532136-03:00","closed_at":"2026-01-12T22:42:06.404532136-03:00","close_reason":"Closed"}
{"id":"fabbro-1xg","title":"Split hotkey bar: general commands vs markup commands","description":"Divide the hotkey description line into two: one for general commands (quit, write, select) and one for markup-specific commands. Consider top/bottom or context-aware display.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:57:58.135963353-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:53:22.967238119-03:00","closed_at":"2026-01-14T13:53:22.967238119-03:00","close_reason":"Closed"}
{"id":"fabbro-23g","title":"Phase 6: Coverage push to 85%","description":"Refactor main.go for testability and add CLI tests.\n\nFile: cmd/fabbro/main.go\n\nRefactor to realMain() pattern:\nfunc main() {\n    os.Exit(realMain(os.Args[1:], os.Stdin, os.Stdout, os.Stderr))\n}\n\nfunc realMain(args []string, stdin io.Reader, stdout, stderr io.Writer) int {\n    // ... all logic here\n}\n\nAdd tests for:\n- CLI command parsing\n- Error paths (not initialized, bad session ID, etc.)\n- init when already initialized\n- review without --stdin flag\n\nSuccess:\n- just check-coverage passes (≥85%)\n- go test ./... passes\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-6","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:30:03.908158764-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:47:06.711810423-03:00","closed_at":"2026-01-12T21:47:06.711810423-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-23g","depends_on_id":"fabbro-86p","type":"blocks","created_at":"2026-01-12T18:30:30.396170791-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-23g","depends_on_id":"fabbro-3j3","type":"blocks","created_at":"2026-01-12T18:30:30.461140437-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-23g","depends_on_id":"fabbro-d7p","type":"blocks","created_at":"2026-01-12T18:30:30.527129983-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-2da","title":"REQ-001: Fix TUI save off-by-one bug (HIGH)","description":"Annotations are NEVER saved due to off-by-one bug:\n- annotationsByLine uses 1-based StartLine as keys\n- Loop uses 0-based index i for lookup\n- Result: all lookups miss, no FEM markers written\n\n**Location:** internal/tui/tui.go#L280-L292\n\n**Fix:** Use lineNum := i + 1 for lookup, also change to map[int][]fem.Annotation for multiple annotations per line.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:03.650716269-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:44:16.866823352-03:00","closed_at":"2026-01-14T13:44:16.866823352-03:00","close_reason":"Closed"}
{"id":"fabbro-2gu","title":"Add project root detection (find .fabbro from subdirs)","description":"EDGE-001: IsInitialized checks cwd only. Users invoking fabbro from subdirectories fail to find .fabbro.\n\n**Problem:** Running `fabbro review` from `src/` in an initialized project fails.\n\n**File:** internal/config/config.go\n\n**Implementation:**\n1. Add `FindProjectRoot() (string, error)` that walks up directory tree\n2. Update `IsInitialized()` to use `FindProjectRoot()`\n3. Update `SessionsDir` to be relative to project root\n\n**Pattern:** Same as git's repository discovery.\n\n**Verification:**\n```bash\ngo test ./internal/config -run TestFindProjectRoot -v\n# Manual: cd into subdir, run fabbro commands\n```","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.141145536-03:00","created_by":"charly vibes","updated_at":"2026-01-27T12:23:07.142883799-03:00","closed_at":"2026-01-27T12:23:07.142883799-03:00","close_reason":"Closed"}
{"id":"fabbro-3e3","title":"Add CONTRIBUTING.md with dev workflow","description":"Create contributor guide.\n\nLocation: CONTRIBUTING.md\n\nContent:\n- Development setup (just setup)\n- Testing workflow (just test, just test-all)\n- Pre-push hooks (lefthook)\n- Conventional commits format\n- Spec-driven development process\n- Code review expectations\n\nSource: AGENTS.md has the workflow documented","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:06:37.103952168-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.957698767-03:00","closed_at":"2026-01-12T17:46:05.957698767-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-3e3","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.591525948-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-3e7","title":"Explore session-to-file sync using git","description":"**Problem:** Session content becomes stale if the original file is edited after review.\n\nScenario:\n1. `fabbro review file.md` → creates session with file content snapshot\n2. User manually edits file.md outside fabbro\n3. AI runs `fabbro apply \u003csession-id\u003e --json`\n4. Annotations reference line numbers that no longer match the file\n\n**Potential solutions using git:**\n\n1. **Store git commit SHA in session frontmatter**\n   - Detect drift: compare current file to stored commit\n   - Show warning if file changed since session creation\n\n2. **Use git diff to remap line numbers**\n   - Compute diff between stored commit and HEAD\n   - Adjust annotation line numbers accordingly\n\n3. **Session invalidation**\n   - Mark session as \"stale\" if source file changed\n   - Require explicit `--force` to apply stale sessions\n\n4. **Content hash approach (non-git)**\n   - Store hash of original content\n   - Quick check without git dependency\n\n---\n\n## Optionality Analysis (2026-01-27)\n\n**Decision Type:** Type 1 (potentially irreversible) — could lock into git semantics\n\n**Key Decision Point:** \"Git as adapter\" vs \"Git as core dependency\"\n\n### Recommended Approach: Opt-in Adapter\n- Keep `.fem` session files as canonical storage (SCM-agnostic)\n- Git integration as export/import behind interface + CLI flag\n- Add preflight checks (git present, repo detected, clean tree)\n\n### Scores:\n- Reversibility: 7/10 (as adapter; drops to 3-4/10 if made core)\n- Resilience: 6/10 (improves to 7/10 with preflight checks + fallbacks)\n- Future Value: 7/10\n- **Overall: 6.7/10 (BALANCED)**\n\n### Escape Hatches:\n| Approach | Reversal Cost | Reversal Time |\n|----------|---------------|---------------|\n| Git as opt-in adapter | LOW-MED | hours-1 day |\n| Git as default/canonical | HIGH | days-weeks |\n\n### Key Risks:\n- Git not installed / not a repo → auto-disable, fall back to session save\n- Dirty tree / conflicts → require clean tree or export patch file\n- User confusion about \"source of truth\" → document clearly\n\n**Recommendation:** Implement as 1-2 day spike. Validate with dogfooding before expanding scope.\n\n**Human review recommended:** YES — product decision affects workflow lock-in.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-24T21:02:06.573711531-03:00","created_by":"charly vibes","updated_at":"2026-01-27T12:44:55.212968914-03:00","dependencies":[{"issue_id":"fabbro-3e7","depends_on_id":"fabbro-ltb","type":"blocks","created_at":"2026-01-24T21:02:17.356261453-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-3j3","title":"Phase 3: SPC command palette","description":"Add Helix-style SPC menu for annotation discoverability.\n\nFile: internal/tui/tui.go\n\n- Add modePalette to mode enum\n- SPC key opens palette overlay\n- Palette shows: [c] comment [d] delete [e] expand [q] question [k] keep [u] unclear\n- k (keep) is ONLY available via palette\n- ESC dismisses palette\n- Any annotation key triggers that action\n\nTests:\n- SPC opens palette mode\n- Pressing 'c' in palette triggers comment\n- ESC dismisses without action\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-3","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:28:25.397252142-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:27:04.092919-03:00","closed_at":"2026-01-12T21:27:04.092919-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-3j3","depends_on_id":"fabbro-uhy","type":"blocks","created_at":"2026-01-12T18:30:30.270313472-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-3kq","title":"Evaluate if the .fem file should contain all the original content or if its more efficient to have only the annotated regions.","description":"Evaluate whether the .fem file format should include all original file content or only the annotated regions for storage efficiency and processing.\n\n### Deliverable:\n- A short report (e.g., Markdown file) analyzing:\n    - Storage size implications for both approaches (full content vs. annotated regions only).\n    - Performance impact on loading, saving, and processing .fem files.\n    - Complexity of reconstruction (if only annotated regions are stored).\n    - Recommendation for the optimal approach with rationale.\n\n### Verification Steps:\n1. Review the generated report for completeness and clarity.\n2. Confirm that performance and storage implications are adequately addressed.\n3. Verify that a clear recommendation with supporting rationale is provided.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:22:24.189402749-03:00","created_by":"charly vibes","updated_at":"2026-01-26T22:20:44.986675654-03:00","closed_at":"2026-01-26T22:20:44.986675654-03:00","close_reason":"Closed"}
{"id":"fabbro-3l6","title":"We need a way to edit the existing annotations. For example, if I select a region and mark it as keep, then I cannot modify my message or the selected region.","description":"Implement functionality to allow users to edit existing annotations, including their associated message and the selected code region.\n\n### Acceptance Criteria:\n- [ ] Users can enter an 'edit mode' for an existing annotation.\n- [ ] In edit mode, the annotation's message text can be modified.\n- [ ] In edit mode, the start and end lines of the annotated region can be adjusted.\n- [ ] Changes made in edit mode can be saved or cancelled.\n- [ ] The edited annotation's properties are correctly reflected in the .fem file.\n\n### Verification Steps:\n1. Create an annotation.\n2. Enter edit mode for the annotation.\n3. Modify the message and save. Verify the change.\n4. Enter edit mode, modify the region (start/end lines), and save. Verify the change.\n5. Enter edit mode, make changes, then cancel. Verify changes are not saved.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:12:43.166633247-03:00","created_by":"charly vibes","updated_at":"2026-01-25T21:17:52.881694391-03:00","closed_at":"2026-01-25T21:17:52.881694391-03:00","close_reason":"Closed"}
{"id":"fabbro-3vu","title":"Replace bubble sort with sort.Slice in session.List()","description":"CORR-002: session.go uses O(n²) bubble sort for ordering sessions. Replace with stdlib sort.Slice for better performance with many sessions.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.562036589-03:00","created_by":"charly vibes","updated_at":"2026-01-26T23:07:02.562036589-03:00"}
{"id":"fabbro-4dj","title":"Add a command to list all available editing sessions.","description":"Add a command to list all available editing sessions.\n\n### Acceptance Criteria:\n- [ ] A new CLI command (e.g., 'fabbro session list') is available.\n- [ ] The command lists all saved editing sessions, showing at least their ID, creation date, and associated file.\n- [ ] Output is clear and user-friendly.\n\n### Verification Steps:\n1. Run 'fabbro session list'.\n2. Verify that all expected sessions are listed.\n3. Check that listed information (ID, date, file) is correct.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:34.787661474-03:00","created_by":"charly vibes","updated_at":"2026-01-26T14:09:58.322717723-03:00","closed_at":"2026-01-26T14:09:58.322717723-03:00","close_reason":"Closed"}
{"id":"fabbro-4qo","title":"Implement TUI help menu with '?' keybinding","description":"Implement the help menu functionality in the TUI as described in  (Scenario: Viewing help). Pressing '?' in normal mode should open a help panel. The help panel should display available keybindings, quick guide, tips, and fabbro version.","status":"open","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-27T21:40:43.238306924-03:00","created_by":"charly vibes","updated_at":"2026-01-27T21:40:43.238306924-03:00","labels":["help","tui"]}
{"id":"fabbro-4v1","title":"SPC palette: always available, markup options conditional on selection","description":"Keep SPC as a general menu (like Helix) that's always available. General commands always visible, but markup-related options only shown when there's an active selection.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:25.075350434-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:29:59.355172248-03:00","closed_at":"2026-01-14T15:29:59.355172248-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-4v1","depends_on_id":"fabbro-tta","type":"blocks","created_at":"2026-01-14T10:29:39.474397472-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-51r","title":"TUI cursor movement is clunky and gets stuck at the edge of the viewport","description":"The user reports that the cursor movement in the TUI feels 'clunky and weird'. The cursor seems to get 'fixed to the end of the view', which makes navigation difficult. This might be related to the closed issue fabbro-k2q, but the problem seems to persist. The expected behavior is smooth scrolling where the viewport follows the cursor, as described in 'specs/03_tui_interaction.feature'.","status":"in_progress","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-27T21:33:53.077510798-03:00","created_by":"charly vibes","updated_at":"2026-01-28T09:24:13.138113305-03:00","labels":["bug","tui"]}
{"id":"fabbro-529","title":"Phase 2: fabbro init command","description":"Implement fabbro init command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 2)\n\nFiles:\n- cmd/fabbro/main.go: root cobra command + init subcommand\n- internal/config/config.go: IsInitialized(), Init()\n\nBehavior:\n- Creates .fabbro/sessions/ directory\n- Idempotent (prints 'already initialized' if exists)\n\nTracer bullet scope:\n- NO config.yaml (defer)\n- NO templates/ (defer)\n- NO .gitignore (defer)\n\nSuccess criteria:\n- go test ./... passes\n- fabbro init creates .fabbro/sessions/\n- Running again prints 'already initialized'","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.419840908-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:14:40.264966292-03:00","closed_at":"2026-01-11T19:14:40.264966292-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-529","depends_on_id":"fabbro-9t9","type":"blocks","created_at":"2026-01-11T18:30:08.169727743-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-5kk","title":"Epic: Rule of 5 Codebase Improvements","description":"Improvements identified from Rule of 5 review: project root detection, save bugfix, completion command, code quality improvements.\n\n## Optionality Analysis (2026-01-27)\n\n**Decision Type:** Type 2 (reversible) — backlog shaping, not architectural commitment\n\n**Scores:**\n- Reversibility: 9/10\n- Resilience: 7/10\n- Future Value: 6/10\n- **Overall: 7.3/10 (FLEXIBLE)**\n\n**Recommendation:** Keep as a container/dashboard for prioritization. Avoid treating as a \"big-bang refactor epic.\" Ship improvements independently as small PRs. Defer or reorder items freely based on user-facing milestones.","status":"closed","priority":2,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:06:49.286545224-03:00","created_by":"charly vibes","updated_at":"2026-01-27T13:05:03.982967678-03:00","closed_at":"2026-01-27T13:05:03.982967678-03:00","close_reason":"Closed"}
{"id":"fabbro-673","title":"Add inline editor for direct content editing","description":"Allow users to press 'i' to open an inline editor and directly modify content instead of writing replacement text in a prompt. When saved, creates a change annotation with the edited content. See specs/03_tui_interaction.feature 'Direct Content Editing' section.\n\n---\n**Implementation notes from oracle review:**\n- Use `bubbles/textarea` (already added as dep) for multi-line editing\n- Add `modeEditor` state with `editorState` struct (textarea + selection range + escPending)\n- Render as overlay panel in footer, not full screen replacement\n- Ctrl+Enter to save (check terminal compatibility), Esc twice to cancel\n- **Important:** Encode newlines as `\\\\n` in change annotation text since current save() appends inline markers\n- Initial content: `strings.Join(m.lines[start:end+1], \"\\n\")`","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-24T21:10:33.593325025-03:00","created_by":"charly vibes","updated_at":"2026-01-25T11:47:22.801663756-03:00","closed_at":"2026-01-25T11:47:22.801663756-03:00","close_reason":"Closed"}
{"id":"fabbro-6ew","title":"Fix save() to preserve source_file in frontmatter","description":"CORR-003: tui.go save() does not include source_file in frontmatter.\n\n**Problem:** When saving a resumed session, source_file metadata is lost.\n\n**File:** internal/tui/tui.go:670-682 (save function)\n\n**Fix:** Include source_file in the saved frontmatter, matching the format in session.Create().\n\n**Verification:**\n```bash\ngo test ./internal/tui -run TestSave -v\n# Manual: fabbro review somefile.go, save, resume, save again, check .fem file has source_file\n```","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.2920397-03:00","created_by":"charly vibes","updated_at":"2026-01-27T12:37:07.67738609-03:00","closed_at":"2026-01-27T12:37:07.67738609-03:00","close_reason":"Closed"}
{"id":"fabbro-6ou","title":"Add viewport centering shortcuts (zz, zt, zb)","description":"Add vim-style viewport centering shortcuts:\n\n- `zz` - Center cursor line in viewport\n- `zt` - Move cursor line to top of viewport  \n- `zb` - Move cursor line to bottom of viewport\n\n## Implementation\n\nModify `internal/tui/tui.go` key handling to detect z-prefix and subsequent character.\n\n## Files\n\n- `internal/tui/tui.go` - add key sequence handling\n- `specs/03_tui_interaction.feature` - scenario \"Center cursor in viewport\"\n\n### Acceptance Criteria:\n- [ ] `zz` centers the current line vertically in the viewport\n- [ ] `zt` scrolls so current line is at top\n- [ ] `zb` scrolls so current line is at bottom\n- [ ] Works correctly at file boundaries (top/bottom)\n\n### Verification Steps:\n1. Open a file longer than the viewport\n2. Navigate to middle of file, press `zz` - cursor line should be centered\n3. Press `zt` - cursor line should be at top\n4. Press `zb` - cursor line should be at bottom","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-24T21:18:14.072287125-03:00","created_by":"charly vibes","updated_at":"2026-01-25T15:29:10.989361218-03:00","closed_at":"2026-01-25T15:29:10.989361218-03:00","close_reason":"Closed"}
{"id":"fabbro-73g","title":"Define v behavior in select mode (toggle off or expand)","description":"Pressing v while in select mode has unclear behavior. Should either toggle off (cancel selection, back to navigate) or expand mode (line → block like Vim). Needs clear feedback.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:35.66836176-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:16:01.936869819-03:00","closed_at":"2026-01-14T12:16:01.936869819-03:00","close_reason":"v now consistently toggles selection off (single or multi-line)"}
{"id":"fabbro-7et","title":"Document Claude Code integration","description":"Document how to integrate fabbro with Claude Code.\n\nLocation: docs/claude-code-integration.md\n\nContent:\n- SessionStart hook setup\n- Slash command usage (/fabbro review)\n- Workflow examples\n- MCP server option (if implemented)\n\nSource: research/2026-01-09-fabbro-design-document.md has integration patterns","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:06:31.271146532-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.877004456-03:00","closed_at":"2026-01-12T17:46:05.877004456-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-7et","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.531377958-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-86p","title":"Phase 5: Multi-line selection","description":"Replace single-line selection with range selection.\n\nFile: internal/tui/tui.go\n\nChange from 'selected int' to:\ntype selection struct {\n    active bool\n    anchor int  // where selection started\n    cursor int  // current end of selection\n}\n\nBehavior:\n- v toggles selection mode\n- In selection mode, j/k extends selection from anchor\n- ESC clears selection\n- Any annotation key operates on selected range\n\nView changes:\n- Highlight all lines in selection range\n- Status bar shows 'N lines selected'\n\nTests:\n- v starts selection at current line\n- j/k in selection extends range\n- annotation applies to full range\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-5","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:29:41.534236799-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:41:20.010246689-03:00","closed_at":"2026-01-12T21:41:20.010246689-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-86p","depends_on_id":"fabbro-uhy","type":"blocks","created_at":"2026-01-12T18:30:30.33317208-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-88t","title":"Phase 4: Minimal TUI","description":"Implement minimal TUI with bubbletea.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 4)\n\nFile: internal/tui/tui.go\n\nKeybindings (tracer bullet only):\n- j/k: navigate lines\n- v: toggle line selection\n- c: add comment (opens text input)\n- w: save and exit\n- q: quit without saving\n\nModel state:\n- content []string\n- cursor int\n- selected int (-1 if none)\n- annotations []Annotation\n- mode string (normal|input)\n- input string\n\nUI layout:\n─── Review: abc123 ───\n  1 │ Line content\n  2 │ Selected line  ← SELECTED\n  3 │ Another line\n──────────────────────\n[v]select [c]omment [w]rite [q]uit\n\nOn save: insert FEM markup, write to session file\n\nSuccess criteria:\n- go test ./... passes\n- TUI displays, navigates, accepts comment, saves","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.655896205-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:54:53.597388337-03:00","closed_at":"2026-01-11T20:54:53.597388337-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-88t","depends_on_id":"fabbro-wwh","type":"blocks","created_at":"2026-01-11T18:30:08.390427543-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-99b","title":"Phase 1: Fix q/Q quit keybinding conflict","description":"Change quit from q to Q (shift+q) so q is available for question annotation.\n\nFile: internal/tui/tui.go\n- Change quit keybinding from 'q' to 'Q'\n- Update help text in View()\n\nTests:\n- Q quits without saving\n- q no longer quits\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-1","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:27:13.420755277-03:00","created_by":"charly vibes","updated_at":"2026-01-12T18:39:25.052553314-03:00","closed_at":"2026-01-12T18:39:25.052553314-03:00","close_reason":"Closed"}
{"id":"fabbro-9bn","title":"Phase 2: Consolidate FEM markers","description":"Extract shared FEM marker definitions to fem/markers.go, remove duplicate from tui.\n\nFiles: internal/fem/markers.go (new), internal/fem/parser.go, internal/tui/tui.go\nSuccess: Single source of truth for marker delimiters\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-2","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.233525378-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:50:38.501051035-03:00","closed_at":"2026-01-12T22:50:38.501051035-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-9bn","depends_on_id":"fabbro-tha","type":"blocks","created_at":"2026-01-12T21:57:52.09069559-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-9gi","title":"Visual indicator for annotated sections","description":"Show visual indication in the TUI for sections that already have annotations. Makes it clear what areas have been marked up during review.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:15:12.375936786-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:08:07.183670014-03:00","closed_at":"2026-01-14T16:08:07.183670014-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-9gi","depends_on_id":"fabbro-l0t","type":"blocks","created_at":"2026-01-14T10:29:39.235731124-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-9pm","title":"OPS-001: Tighten file permissions for sessions","description":"Sessions may contain proprietary code. Current 0644/0755 permissions allow other users to read on shared systems.\n\n**Locations:**\n- session.go#L44: 0644\n- tui.go#L304: 0644\n- config.go#L14: 0755\n\n**Fix:** Use 0600 for files, 0700 for directories.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:25:31.189204319-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:12:29.19669301-03:00","closed_at":"2026-01-14T15:12:29.19669301-03:00","close_reason":"Closed"}
{"id":"fabbro-9qv","title":"When hitting W to write nothing seems to happen. We need to notify that the changes were saved.","description":"Implement a visual or textual notification to the user when changes are successfully saved after pressing 'W'.\n\n### Acceptance Criteria:\n- [ ] A brief, non-intrusive notification (e.g., 'Saved changes.' message in status bar, or temporary visual cue) appears upon successful save.\n- [ ] The notification is visible for a short duration (e.g., 2-3 seconds) and then disappears.\n- [ ] No notification appears if there are no changes to save.\n\n### Verification Steps:\n1. Open a file in fabbro.\n2. Make some changes.\n3. Press 'W' and observe the save notification.\n4. Press 'W' again without making changes and verify no notification appears.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:13:46.90667331-03:00","created_by":"charly vibes","updated_at":"2026-01-25T11:32:45.098987193-03:00","closed_at":"2026-01-25T11:32:45.098987193-03:00","close_reason":"Closed"}
{"id":"fabbro-9r3","title":"Document shell completion command","description":"fabbro completion exists (standard Cobra feature) but is not documented in README or docs. Users can't discover it. Add documentation for bash/fish/zsh/powershell completions.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:57.743554421-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:12:11.020622301-03:00","closed_at":"2026-01-14T12:12:11.020622301-03:00","close_reason":"Added shell completion documentation to README.md"}
{"id":"fabbro-9t9","title":"Phase 1: Project Setup","description":"Create Go project structure and dependencies.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 1)\n\nStructure:\n- cmd/fabbro/main.go\n- internal/config/config.go\n- internal/session/session.go\n- internal/fem/parser.go\n- internal/tui/tui.go\n- go.mod (github.com/charly-vibes/fabbro)\n\nDependencies: cobra, bubbletea, lipgloss\n\nSuccess criteria:\n- go mod tidy succeeds\n- go build ./... succeeds","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.281475211-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:12:31.731998272-03:00","closed_at":"2026-01-11T19:12:31.731998272-03:00","close_reason":"Closed"}
{"id":"fabbro-9vc","title":"Review annotation behavior for multi-line selections","description":"Review the current annotation behavior for multi-line selections.\n[REQ-001] tui.go:315-322 creates one annotation per line in a selection.                        \n\nCurrent behavior:                                                                               \n\n• User selects lines 5-10                                                                       \n• User adds comment 'fix this'                                                                  \n• 6 separate annotations created, each with identical text                                      \n\nCode:                                                                                           \n\n    for line := start; line \u003c= end; line++ {                                                      \n        m.annotations = append(m.annotations, fem.Annotation{                                     \n            StartLine: line + 1,                                                                  \n            EndLine:   line + 1,                                                                  \n            Type:      m.inputType,                                                               \n            Text:      text, # Same text for every line                                          \n        })                                                                                        \n    }                                                                                             \n\nQuestions to resolve:                                                                           \n\n1. Is this intentional for inline FEM markers?                                                  \n2. Should we create a single annotation with StartLine=5, EndLine=10 instead?                   \n3. How does this affect the apply command output?                                               \n\nRef: Code review 2026-01-19                                                                     \n\n### Deliverable:\n- A brief analysis document (e.g., Markdown file) answering the questions posed in the description and providing a recommendation for the desired behavior for multi-line annotations.\n\n### Verification Steps:\n1. Review the analysis document for clear answers to the questions.\n2. Confirm that a recommendation for behavior is provided.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:38:01.59821411-03:00","created_by":"charly vibes","updated_at":"2026-01-26T12:47:28.365004359-03:00","closed_at":"2026-01-26T12:47:28.365004359-03:00","close_reason":"Closed"}
{"id":"fabbro-9y0","title":"Investigate gemini-cli interactive shell detection for merge commits","description":"gemini-cli detected that a shell command was interactive (expecting user to close a merge commit editor). Investigate how they detect TTY/interactive shells and whether fabbro could use similar detection for:\n- Knowing when to wait for user input vs timeout\n- Detecting when editor commands are invoked\n- Better handling of interactive git operations (merge, rebase, commit --amend)\n\nDeliverable: research doc in research/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T22:25:01.05496576-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:11.153022751-03:00","closed_at":"2026-01-14T16:21:11.153022751-03:00","close_reason":"Closed"}
{"id":"fabbro-a0c","title":"Setup CI/CD pipeline with GitHub Actions","description":"CI/CD infrastructure using justfile commands for local/CI parity.\n\nFiles created:\n- .github/workflows/ci.yml - runs 'just ci'\n- justfile - unified commands (test, lint, check-coverage, build)\n- lefthook.yml - pre-push hook runs 'just pre-push'\n\nSee: plans/2026-01-11-testing-strategy.md","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:55:51.401740943-03:00","created_by":"charly vibes","updated_at":"2026-01-11T18:56:00.820018973-03:00","closed_at":"2026-01-11T18:56:00.820018973-03:00","close_reason":"Closed"}
{"id":"fabbro-a32","title":"We should add a command to resume editing sessions and a list command too.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:18:36.966028314-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:33:42.325876707-03:00","closed_at":"2026-01-19T19:33:42.325876707-03:00","close_reason":"Split into two new issues for better scope and atomicity."}
{"id":"fabbro-afj","title":"MAINT-003: Centralize annotation type definitions","description":"Annotation types (comment, delete, etc.) hardcoded in multiple places:\n- tui.go inputPrompts map\n- tui.go hardcoded inputType strings\n- fem/markers.go Markers map\n\n**Fix:** Define AnnotationTypes once in fem package, validate against it.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:26.237223253-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:08:09.609837475-03:00","closed_at":"2026-01-14T15:08:09.609837475-03:00","close_reason":"Closed"}
{"id":"fabbro-aqb","title":"OPS-002: Include session ID in error messages","description":"Error messages in apply command don't always include the session ID being operated on.\n\n**Location:** cmd/fabbro/main.go#L135-L141\n\n**Fix:** Use fmt.Errorf with session ID: 'failed to load session %q: %w'\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:25:46.005976247-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:13:09.530679393-03:00","closed_at":"2026-01-14T16:13:09.530679393-03:00","close_reason":"Closed"}
{"id":"fabbro-at2","title":"Create README.md with project overview","description":"Create comprehensive README.md for the project.\n\nSections:\n- Project description (what fabbro does)\n- Installation instructions\n- Quick start guide\n- Basic usage examples\n- Link to full documentation\n\nShould be created after tracer bullet proves the concept works.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:04:59.717798041-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.553143198-03:00","closed_at":"2026-01-12T17:46:05.553143198-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-at2","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.288764005-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-c5b","title":"Improve selection mode visual feedback","description":"When in select mode, it's not clear that moving around expands the selection context. Add visual indication like highlighting the growing selection or showing line count.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:06.00542982-03:00","created_by":"charly vibes","updated_at":"2026-01-14T14:01:14.89289618-03:00","closed_at":"2026-01-14T14:01:14.89289618-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-c5b","depends_on_id":"fabbro-73g","type":"blocks","created_at":"2026-01-14T10:29:39.580461297-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-cm0","title":"Phase 4: Remove custom max()","description":"Delete custom max() function - Go 1.22 has builtin.\n\nFiles: internal/tui/tui.go\nSuccess: grep 'func max' internal/ returns nothing\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-4","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.387670389-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:37:55.209586953-03:00","closed_at":"2026-01-12T22:37:55.209586953-03:00","close_reason":"Closed"}
{"id":"fabbro-cur","title":"REQ-003: Add FEM parser edge case tests and docs","description":"Parser limitations not tested or documented:\n1. Single-line only (no multi-line annotations)\n2. Unbalanced markers left in cleanContent\n3. Nested markers undefined behavior\n\n**Fix:**\n- Add tests for: unbalanced markers, multiple annotations per line, nested markers\n- Document limitations in README and docs/fem.md\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:34.383165606-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:06:02.460603899-03:00","closed_at":"2026-01-14T15:06:02.460603899-03:00","close_reason":"Closed"}
{"id":"fabbro-d3d","title":"Research non-obtrusive TUI UX for agent workflows","description":"Investigate how to make fabbro TUI imperceptible/non-obtrusive when working in CLI agent workflows.\n\nQuestions to answer:\n- How do other TUI tools launch without disrupting terminal flow?\n- Should fabbro open in a new terminal tab/pane vs inline?\n- tmux/zellij integration patterns?\n- Background session creation + notification when ready?\n- Floating/overlay TUI patterns (like fzf)?\n\nReference tools to study:\n- fzf (floating picker)\n- lazygit (full-screen but fast)\n- gum (inline prompts)\n- charmbracelet/pop (notifications)\n- Elia TUI\n- How Amp's 'open in editor' feels seamless\n\nGoal: Define UX requirements for fabbro that feel native to agent workflows.\n\nDeliverable: research doc in research/ with UX requirements","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T18:48:44.74240606-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:02.262973314-03:00","closed_at":"2026-01-14T16:21:02.262973314-03:00","close_reason":"Closed"}
{"id":"fabbro-d7p","title":"Phase 4: Improved navigation","description":"Add page navigation and jump commands.\n\nFile: internal/tui/tui.go\n\nKeybindings:\n- Ctrl+d → scroll down half page\n- Ctrl+u → scroll up half page\n- g → start g-pending mode\n- gg (g then g) → jump to first line\n- G → jump to last line\n\nImplementation:\n- Track gPending bool in model\n- Any key other than g clears pending state\n\nTests:\n- Ctrl+d moves cursor down by half viewport\n- gg moves to line 0\n- G moves to last line\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-4","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:29:04.363012449-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:35:46.478717945-03:00","closed_at":"2026-01-12T21:35:46.478717945-03:00","close_reason":"Closed"}
{"id":"fabbro-d7x","title":"REQ-004: Error on conflicting --stdin and file args","description":"If user passes both --stdin and a file path, stdin silently wins. User may not realize their file was ignored.\n\n**Location:** cmd/fabbro/main.go#L82-L99\n\n**Fix:** Return error: 'cannot use both --stdin and a file path'\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:44.808359165-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:10:52.781512587-03:00","closed_at":"2026-01-14T15:10:52.781512587-03:00","close_reason":"Closed"}
{"id":"fabbro-d8r","title":"Phase 5: FEM Parser","description":"Implement FEM parser for comment annotations.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 5)\n\nFile: internal/fem/parser.go\n\nTypes:\n- Annotation{Type, Text, Line}\n\nFunction:\n- Parse(content string) ([]Annotation, cleanContent string, error)\n\nTracer bullet scope:\n- Only parse {\u003e\u003e comment \u003c\u003c} markers\n- Other annotation types deferred\n\nParsing strategy:\n- Regex-based for tracer bullet\n- Find {\u003e\u003e ... \u003c\u003c} patterns\n- Extract text, determine line number\n- Return clean content with markers stripped\n\nSuccess criteria:\n- Test: {\u003e\u003e hello \u003c\u003c} extracts annotation with text 'hello'\n- Test: multiple annotations on different lines\n- Can parse session file created by TUI","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.776341812-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:56:09.5312925-03:00","closed_at":"2026-01-11T20:56:09.5312925-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-d8r","depends_on_id":"fabbro-88t","type":"blocks","created_at":"2026-01-11T18:30:08.502305512-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-drm","title":"Document CLI commands and flags","description":"Create CLI reference documentation.\n\nLocation: docs/cli-reference.md\n\nCommands to document:\n- fabbro init [--quiet]\n- fabbro review \u003cfile\u003e | --stdin [--editor] [--no-interactive] [--id]\n- fabbro apply \u003csession-id\u003e [--json]\n- fabbro resume \u003csession-id\u003e\n- fabbro sessions [--list]\n- fabbro show \u003csession-id\u003e\n\nInclude exit codes and error messages.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:25.629548546-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.714104389-03:00","closed_at":"2026-01-12T17:46:05.714104389-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-drm","depends_on_id":"fabbro-q57","type":"blocks","created_at":"2026-01-11T19:06:45.410231862-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-e1d","title":"w key should write only, not write and quit","description":"Currently w writes and quits. Should only save the session. Separate write and quit into distinct actions for better control.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:02:18.189390565-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:03:47.747935233-03:00","closed_at":"2026-01-14T12:03:47.747935233-03:00","close_reason":"w key now saves without quitting. Q or Ctrl+C to quit."}
{"id":"fabbro-eeq","title":"Inline text editing/change annotation","description":"Add ability to directly edit or propose changes to text inline, not just annotate. Would allow marking a selection and providing replacement text as a suggested change.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:12:41.301445617-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:01:20.366881439-03:00","closed_at":"2026-01-14T16:01:20.366881439-03:00","close_reason":"Closed"}
{"id":"fabbro-ejx","title":"Epic: Pluggable annotation parser architecture","description":"Refactor FEM parser to support multiple annotation formats via a parser interface. This enables:\n\n1. Current FEM syntax ({\u003e\u003e \u003c\u003c}) for backward compatibility\n2. Markdown HTML comments () for LLM-friendly markdown files\n3. Language-native comments (// fabbro:comment:) for source code files\n\nKey design:\n\n• Parser interface with Parse(content) -\u003e []Annotation\n• Format auto-detection or explicit --format flag\n• Configurable output format\n\nResearch: research/2026-01-14-markdown-comment-markup.md\n\n### Goals:\n- Implement a flexible and extensible annotation parsing architecture.\n- Support at least three distinct annotation formats (FEM, Markdown HTML comments, language-native comments).\n- Ensure backward compatibility with existing FEM syntax.\n- Provide mechanisms for format auto-detection and explicit format selection.\n\n### Child Issues:\n- fabbro-gt1: Build markdown-comment annotation test corpus (20-50 cases)\n- fabbro-kvs: Create annotation format evaluation harness\n- fabbro-nts: Add token count analysis for FEM vs markdown-comment formats\n- (Further child issues for implementing specific parsers and integration)\n","status":"open","priority":3,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:55:48.286117573-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:44:14.77615181-03:00","dependencies":[{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-gt1","type":"blocks","created_at":"2026-01-14T16:56:46.401189311-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-kvs","type":"blocks","created_at":"2026-01-14T16:56:46.477349403-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-nts","type":"blocks","created_at":"2026-01-14T16:56:46.552595265-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-gia","title":"Implement fabbro review \u003cfilename\u003e","description":"Currently fabbro review only accepts --stdin. The spec (02_review_session.feature) defines 'fabbro review document.md' but it's not implemented yet.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:59:13.584254638-03:00","created_by":"charly vibes","updated_at":"2026-01-14T11:58:35.692261181-03:00","closed_at":"2026-01-14T11:58:35.692261181-03:00","close_reason":"Closed"}
{"id":"fabbro-gt1","title":"Build markdown-comment annotation test corpus (20-50 cases)","description":"Build a markdown-comment annotation test corpus (20-50 cases).\nCreate test cases for evaluating AI model performance with different annotation formats.\n\n**Categories:**\n- Simple: Single annotation per file\n- Dense: Multiple annotations, various types\n- Edge cases: Nested quotes, special chars\n- Language variety: Go, Python, JS, Rust embedded in markdown\n\nFrom: research/2026-01-14-markdown-comment-markup.md (COMP-001, ACT-001)\n\n### Deliverable:\n- Collection of 20-50 markdown files with markdown-comment annotations\n- Manifest/index file describing corpus contents\n\n### Verification:\n1. Review files for quantity and category coverage\n2. Manually inspect subset for correct annotation syntax\n3. Verify manifest/index file correctness\n\n---\n\n## Optionality Analysis (2026-01-27)\n\n**Decision Type:** Type 2 (easily reversible) — just test data\n\n**Scores:**\n- Reversibility: 10/10 (can delete/replace anytime)\n- Resilience: 8/10 (improves confidence, prevents regressions)\n- Future Value: 7/10 (enables safe refactors + syntax evolution)\n- **Overall: 8.3/10 (FLEXIBLE)**\n\n**Recommendation:** Ship incrementally. Start minimal (20-50 cases), grow test-driven as bugs/edge-cases appear. Organize with metadata (name, input, expected output) for extensibility.\n\n**Effort:** S-M (2-6 hours)\n\n**Human review recommended:** NO — low-risk, easily reversible.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:55:59.492986385-03:00","created_by":"charly vibes","updated_at":"2026-01-27T12:45:08.738350115-03:00"}
{"id":"fabbro-h13","title":"Implement nesting detection in FEM parser","description":"Implement the recommended solution from research/2026-01-26-nested-annotation-handling.md:\n\n1. Build list of opening tokens from Markers (avoid duplication)\n2. Check captured text for any opening token in Parse()\n3. If nested marker found, skip annotation and preserve original line\n4. Make parsing order deterministic (fixed slice instead of map)\n5. Add tests for detection behavior\n\nAcceptance criteria:\n- Nested input like `{\u003e\u003e outer {\u003e\u003e inner \u003c\u003c} \u003c\u003c}` is preserved unchanged\n- No corrupted clean output with orphan markers\n- Deterministic parsing order across runs","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T13:06:37.681897074-03:00","created_by":"charly vibes","updated_at":"2026-01-26T13:08:05.518099994-03:00","closed_at":"2026-01-26T13:08:05.518099994-03:00","close_reason":"Closed"}
{"id":"fabbro-ho0","title":"Split tui.go into smaller focused files","description":"CLAR-001: tui.go is 900+ lines with mixed responsibilities. Split into tui_view.go, tui_handlers.go, tui_model.go for better maintainability.","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.756768648-03:00","created_by":"charly vibes","updated_at":"2026-01-27T13:33:55.457618948-03:00","closed_at":"2026-01-27T13:33:55.457618948-03:00","close_reason":"Closed"}
{"id":"fabbro-hxo","title":"SEC-004: Check sessions dir in IsInitialized","description":"IsInitialized only checks .fabbro/, not .fabbro/sessions/. If sessions/ was deleted, review proceeds then fails at write time.\n\n**Location:** internal/config/config.go#L8-L11\n\n**Fix:** Also check SessionsDir exists.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:30.776031378-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:49:28.186449379-03:00","closed_at":"2026-01-14T13:49:28.186449379-03:00","close_reason":"Closed"}
{"id":"fabbro-jg1","title":"Add fabbro tutor command","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-27T17:59:14.97386945-03:00","created_by":"charly vibes","updated_at":"2026-01-28T09:21:35.562503882-03:00","closed_at":"2026-01-28T09:21:35.562503882-03:00","close_reason":"Closed"}
{"id":"fabbro-k2q","title":"Selection hidden when expanding upward from bottom of viewport","description":"When starting a selection at the last visible line on screen and moving up, the selection becomes hidden because the viewport doesn't scroll to keep it visible. Viewport should follow the selection anchor/cursor.","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:08:14.316986833-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:01:50.708245495-03:00","closed_at":"2026-01-14T12:01:50.708245495-03:00","close_reason":"Tests confirm viewport scrolling works correctly. Added TestViewportScrollsUpWhenSelecting to verify cursor stays visible when selecting upward."}
{"id":"fabbro-kvs","title":"Create annotation format evaluation harness","description":"Create an annotation format evaluation harness.\nBuild tooling to compare AI model performance across annotation formats.                        \n\nMetrics:                                                                                        \n\n• Extraction accuracy (% correctly parsed)                                                      \n• Position accuracy (% attached to correct line)                                                \n• Type accuracy (% correct annotation type)                                                     \n• Format adherence (% valid syntax)                                                             \n\nFrom: research/2026-01-14-markdown-comment-markup.md                                            \n\n### Deliverable:\n- A functional test harness capable of evaluating AI model performance for different annotation formats based on the specified metrics.\n- Clear instructions on how to use the harness and interpret its results.\n\n### Verification Steps:\n1. Run the evaluation harness with the test corpus (from fabbro-gt1).\n2. Verify that it produces results for the specified metrics (extraction, position, type, format adherence).\n3. Check if the results are consistent and reproducible.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:56:08.971300717-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:52.718595396-03:00","dependencies":[{"issue_id":"fabbro-kvs","depends_on_id":"fabbro-gt1","type":"blocks","created_at":"2026-01-19T19:35:25.831027251-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-kyl","title":"Add a command to resume previous editing sessions.","description":"Add a command to resume previous editing sessions.\n\n### Acceptance Criteria:\n- [ ] A new CLI command (e.g., 'fabbro session resume \u003csession-id\u003e') is available.\n- [ ] The command successfully reloads a specified saved session state.\n- [ ] The editor view is restored to the state it was in when the session was saved.\n\n### Verification Steps:\n1. Save an editing session with some annotations.\n2. Quit fabbro.\n3. Run 'fabbro session resume \u003csaved-session-id\u003e'.\n4. Verify that the editor opens with the correct file and all annotations are present.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:28.37182794-03:00","created_by":"charly vibes","updated_at":"2026-01-26T14:23:04.233581622-03:00","closed_at":"2026-01-26T14:23:04.233581622-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-kyl","depends_on_id":"fabbro-4dj","type":"blocks","created_at":"2026-01-19T19:35:14.467007988-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-l0t","title":"Support multiple/overlapping annotations on same section","description":"Allow multiple annotations on the same text section or intersecting selections. Currently unclear if overlapping annotations are supported.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:15:05.205349296-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:05:30.68745359-03:00","closed_at":"2026-01-14T16:05:30.68745359-03:00","close_reason":"Closed"}
{"id":"fabbro-lbg","title":"Document TUI keybindings","description":"Create TUI keybindings reference.\n\nLocation: docs/tui-keybindings.md (or in README)\n\nSections:\n- Navigation (j/k, gg/G, Ctrl+d/u, /)\n- Selection (v, ap, ab, as, {, })\n- Annotations (SPC menu, c, d, e, q, k, u)\n- Session (w, Ctrl+S, ?, a)\n\nSource: specs/03_tui_interaction.feature","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:57.495371889-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.796266215-03:00","closed_at":"2026-01-12T17:46:05.796266215-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-lbg","depends_on_id":"fabbro-88t","type":"blocks","created_at":"2026-01-11T19:06:45.468907587-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-ltb","title":"Explore file-based session lookup for agent workflows","description":"**Problem:** AI agents must track session IDs manually after `fabbro review file.md`. No way to query 'get the review for this file'.\n\n**Proposed solution:**\n1. Store `source_file` in session frontmatter\n2. Add `fabbro apply --file file.md --json` to find latest session for a file\n3. Add `fabbro sessions --file file.md` to list sessions by source file\n4. Include `sourceFile` in JSON output (already noted missing in docs/spec-coverage.md)\n\n**Desired agent workflow:**\n```\nAgent: fabbro review plans/my-plan.md\nHuman: [annotates, saves, exits]\nAgent: fabbro apply --file plans/my-plan.md --json\n```\n\n**Research needed:**\n- How to handle multiple sessions for same file (latest? list all?)\n- Relative vs absolute paths\n- stdin sessions (no source file)","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-24T20:58:49.17178769-03:00","created_by":"charly vibes","updated_at":"2026-01-24T21:33:21.141644596-03:00","closed_at":"2026-01-24T21:33:21.141644596-03:00","close_reason":"Closed"}
{"id":"fabbro-lz6","title":"Implement single annotation for multi-line selections","description":"Change TUI to create one annotation with StartLine/EndLine range instead of N separate annotations.\n\n**Context:** Analysis in research/2026-01-26-multiline-annotation-analysis.md\n\n**Implementation:**\nChange tui.go:448-455 from loop to single append:\n```go\nm.annotations = append(m.annotations, fem.Annotation{\n    StartLine: start + 1,\n    EndLine:   end + 1,\n    Type:      m.inputType,\n    Text:      text,\n})\n```\n\n**FEM Serialization:** Place marker on first line only; store range in session metadata.\n\n**Verification:**\n- [ ] Existing tests pass\n- [ ] Add test: multi-line selection creates single annotation  \n- [ ] Update spec 04_apply_feedback.feature @planned → @implemented for multi-line scenario","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T12:47:25.428095294-03:00","created_by":"charly vibes","updated_at":"2026-01-26T17:50:28.639312933-03:00","closed_at":"2026-01-26T17:50:28.639312933-03:00","close_reason":"Closed"}
{"id":"fabbro-n1f","title":"Align TUI keybindings - single source of truth","description":"Spec 03 says q=question, Ctrl+C/ESC=exit. Post-tracer changed quit to Q. Code, spec, and help text are inconsistent. Document authoritative keybindings, sync all sources.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:05.173051967-03:00","created_by":"charly vibes","updated_at":"2026-01-13T14:58:35.111690869-03:00","closed_at":"2026-01-13T14:58:35.111690869-03:00","close_reason":"Closed"}
{"id":"fabbro-n41","title":"Normalize line endings in FEM parser","description":"EDGE-003: parser.go splits on \\n only. Windows files with \\r\\n may cause stray \\r in annotations. Normalize line endings on parse.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-26T23:07:02.663681094-03:00","created_by":"charly vibes","updated_at":"2026-01-26T23:07:02.663681094-03:00"}
{"id":"fabbro-n6h","title":"Phase 7: Integration Test","description":"Implement tiered testing strategy per plans/2026-01-11-testing-strategy.md\n\nTiers:\n- Tier 1: Unit tests (default, \u003c1s, 98% coverage)\n- Tier 2: Integration tests (//go:build integration, \u003c10s)\n- Tier 3: Property-based/fuzz tests (//go:build fuzz, \u003c5s)\n\nTotal budget: \u003c15s for all tiers.\n\nCommands:\n- just test (Tier 1)\n- just test-integration (Tier 2)\n- just test-fuzz (Tier 3)\n- just test-all (all tiers)\n- just check-coverage (enforce 98%)","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:58.013377828-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:59:08.794987951-03:00","closed_at":"2026-01-11T20:59:08.794987951-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-n6h","depends_on_id":"fabbro-q57","type":"blocks","created_at":"2026-01-11T18:30:08.727645324-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-nts","title":"Add token count analysis for FEM vs markdown-comment formats","description":"Add token count analysis for FEM vs markdown-comment formats.\n\n## Purpose\n\nCompare token efficiency of different annotation formats to inform the pluggable parser architecture (fabbro-ejx).\n\n## Implementation\n\nCreate a script at `test/scripts/token-analysis.go` (or `research/scripts/`) that:\n\n1. Takes annotated files in both FEM and markdown-comment formats\n2. Counts tokens using tiktoken or similar\n3. Reports comparison metrics\n\n## Output\n\nGenerate report in `research/token-analysis-results.md` with:\n- Token counts per format\n- Overhead percentage comparison\n- Recommendations for format choice\n\n## Files to Create\n\n- `test/scripts/token-analysis.go` or `research/scripts/token-analysis.go`\n- Output: `research/token-analysis-results.md`\n\n### Deliverable:\n- A script that analyzes token count differences between FEM and markdown-comment formats\n- A report demonstrating the analysis results\n\n### Verification Steps:\n1. Run the analysis script with sample FEM and markdown-comment files from fabbro-gt1 corpus\n2. Verify output reports token counts for both formats\n3. Ensure results are clear and comparable\n\nRef: research/2026-01-14-markdown-comment-markup.md","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:56:40.035888025-03:00","created_by":"charly vibes","updated_at":"2026-01-24T21:20:57.072641369-03:00","dependencies":[{"issue_id":"fabbro-nts","depends_on_id":"fabbro-kvs","type":"blocks","created_at":"2026-01-19T19:35:32.269253447-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-o5e","title":"We should prompt for confirmation when someone wants to quit and maybe to be consistent with all CLI tools instead of using Q we need to do CTRL+C twice.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:17:07.332163401-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:33:14.778432815-03:00","closed_at":"2026-01-19T19:33:14.778432815-03:00","close_reason":"Split into two new issues for better scope and atomicity."}
{"id":"fabbro-p47","title":"Investigate carapace for shell completions (incl. nushell)","description":"Investigate carapace (https://github.com/rsteube/carapace) as alternative to Cobra completions. Evaluate: nushell support, maintenance burden, feature completeness. Deliverable: research doc in research/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:54:33.431815718-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:28.930564156-03:00","closed_at":"2026-01-14T16:21:28.930564156-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-p47","depends_on_id":"fabbro-9r3","type":"blocks","created_at":"2026-01-14T10:29:39.696178199-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-prd","title":"Add docs reminder to commit workflow in AGENTS.md","description":"Commit workflow should include reminder to update documentation when adding features. Ensures new commands like 'fabbro completion' don't go undocumented.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:59:06.796307823-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:11:33.142165277-03:00","closed_at":"2026-01-14T12:11:33.142165277-03:00","close_reason":"Added docs reminder to commit workflow in AGENTS.md"}
{"id":"fabbro-q57","title":"Phase 6: fabbro apply --json command","description":"Implement fabbro apply --json command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 6)\n\nFile: cmd/fabbro/main.go (apply subcommand)\n\nBehavior:\n- Load session by ID\n- Parse FEM annotations\n- Output JSON to stdout\n\nJSON format:\n{\n  \"session_id\": \"abc123\",\n  \"annotations\": [\n    {\"type\": \"comment\", \"text\": \"...\", \"line\": 2}\n  ]\n}\n\nSuccess criteria:\n- go test ./... passes\n- fabbro apply \u003cid\u003e --json outputs valid JSON\n- Annotations from TUI appear in output","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.890516041-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:57:49.372201696-03:00","closed_at":"2026-01-11T20:57:49.372201696-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-q57","depends_on_id":"fabbro-d8r","type":"blocks","created_at":"2026-01-11T18:30:08.618038681-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-r7r","title":"Document FEM markup syntax","description":"Create FEM syntax reference documentation.\n\nLocation: docs/fem-syntax.md (or section in README)\n\nContent:\n- All annotation types with examples\n- Marker reference table\n- Escaping rules\n- Edge cases\n- Session file format (YAML frontmatter)\n\nSource: specs/06_fem_markup.feature has the full spec","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:17.452244077-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.63629999-03:00","closed_at":"2026-01-12T17:46:05.63629999-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-r7r","depends_on_id":"fabbro-d8r","type":"blocks","created_at":"2026-01-11T19:06:45.351670119-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-rcf","title":"Implement TUI search with fuzzy matching","description":"Implement the search functionality in the TUI as described in . Pressing \"/\" in normal mode should open a search prompt. The search should be fuzzy. Pressing Enter should jump to the next match. The matched text should be highlighted.","status":"open","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-27T21:31:31.661346056-03:00","created_by":"charly vibes","updated_at":"2026-01-27T21:31:31.661346056-03:00","labels":["search","tui"]}
{"id":"fabbro-rdz","title":"Optimize highlight computation for wrapped lines","description":"Optimize highlight computation for wrapped lines.\n[PERF-003] tui.go:456-471 computes highlighting twice for wrapped lines.                        \n\nCurrent code:                                                                                   \n\n• Computes highlightedLine for the full line                                                    \n• If line wraps, recomputes highlighting for each part separately                               \n• The pre-computed highlightedLine is only used when len(wrapped) == 1                          \n\nRecommendation: Restructure to avoid re-tokenizing wrapped line parts. Either:                  \n\n1. Highlight the full line once, then split the ANSI-encoded result                             \n2. Cache tokenization results                                                                   \n3. Only highlight what's visible                                                                \n\nPriority: Low - only affects lines that wrap, minor performance impact.                         \n\n### Acceptance Criteria:\n- [ ] The highlight computation for wrapped lines is refactored to avoid redundant processing.\n- [ ] Performance metrics (e.g., CPU time for rendering wrapped lines) show improvement.\n- [ ] Visual highlighting of wrapped lines remains correct and consistent.\n\n### Verification Steps:\n1. Enable profiling/benchmarking for rendering wrapped lines.\n2. Measure performance before and after the optimization.\n3. Visually inspect files with wrapped lines to ensure correct highlighting.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:37:50.757267931-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:31.475424704-03:00"}
{"id":"fabbro-s1h","title":"SEC-002: Validate session frontmatter on load (HIGH)","description":"session.Load silently ignores parse errors:\n- time.Parse errors ignored → zero CreatedAt\n- Missing session_id → empty ID, saves to .fabbro/sessions/.fem\n- No validation → garbage in, garbage out\n\n**Location:** internal/session/session.go#L77-L91\n\n**Fix:** Return errors for missing/invalid fields instead of silently continuing.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:10.906999186-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:45:46.300361711-03:00","closed_at":"2026-01-14T13:45:46.300361711-03:00","close_reason":"Closed"}
{"id":"fabbro-st1","title":"Add syntax highlighting in TUI","description":"Add syntax highlighting for code content displayed in the review TUI. Would improve readability when reviewing code files.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:10:37.314723012-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:46:26.651171635-03:00","closed_at":"2026-01-14T15:46:26.651171635-03:00","close_reason":"Closed"}
{"id":"fabbro-t19","title":"Add line wrap for long lines in TUI","description":"Long lines should wrap in the TUI viewport instead of being cut off or requiring horizontal scrolling. Improves readability for content with long lines.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:11:09.941850732-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:37:42.031507848-03:00","closed_at":"2026-01-14T15:37:42.031507848-03:00","close_reason":"Closed"}
{"id":"fabbro-tha","title":"Phase 1: Consolidate Annotation type","description":"Remove duplicate Annotation struct from tui package, use fem.Annotation instead.\n\nFiles: internal/tui/tui.go, internal/tui/tui_test.go\nSuccess: grep -r 'type Annotation struct' internal/ shows only fem/parser.go\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-1","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.158116888-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:46:40.642223823-03:00","closed_at":"2026-01-12T22:46:40.642223823-03:00","close_reason":"Closed"}
{"id":"fabbro-tta","title":"Context-aware hotkey display: show markup only when selected","description":"Show markup shortcuts/commands only when there is an active selection. This reduces cognitive load and creates natural flow: select → see what you can do with selection.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:17.832225114-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:53:23.116904644-03:00","closed_at":"2026-01-14T13:53:23.116904644-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-tta","depends_on_id":"fabbro-1xg","type":"blocks","created_at":"2026-01-14T10:29:39.36166257-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-ucw","title":"Unify FEM regex patterns with Markers definition","description":"Unify FEM regex patterns with Markers definition.\n\n## Problem\n\nThe FEM package has two separate definitions for annotation delimiters:\n\n1. **Regex patterns** in `internal/fem/parser.go:15-22`:\n   ```go\n   var patterns = map[string]*regexp.Regexp{\n       \"comment\":  regexp.MustCompile(`\\{\u003e\u003e\\s*(.*?)\\s*\u003c\u003c\\}`),\n       \"delete\":   regexp.MustCompile(`\\{--\\s*(.*?)\\s*--\\}`),\n       // ... etc\n   }\n   ```\n\n2. **Markers map** in `internal/fem/markers.go:5`:\n   ```go\n   var Markers = map[string][2]string{\n       \"comment\":  {\"{\u003e\u003e\", \"\u003c\u003c}\"},\n       \"delete\":   {\"{--\", \"--}\"},\n       // ... etc\n   }\n   ```\n\nThis duplication can lead to drift and bugs.\n\n## Desired Outcome\n\nGenerate regex patterns programmatically from the Markers map, or vice versa. Single source of truth for delimiter definitions.\n\n## Files\n\n- `internal/fem/parser.go` - regex patterns\n- `internal/fem/markers.go` - Markers definition\n\n### Acceptance Criteria:\n- [ ] FEM regex patterns and Markers definition are consolidated into a single source\n- [ ] All annotation parsing and rendering logic consistently uses the unified definition\n- [ ] No regressions in parsing existing FEM annotations\n\n### Verification Steps:\n1. Run `just test` to ensure no regressions\n2. Manually test various FEM annotation types to confirm correct behavior","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:51:23.328107358-03:00","created_by":"charly vibes","updated_at":"2026-01-26T13:40:26.301667148-03:00","closed_at":"2026-01-26T13:40:26.301667148-03:00","close_reason":"Closed"}
{"id":"fabbro-uhy","title":"Phase 2: All 6 annotation types","description":"Add remaining annotation types to parser and TUI.\n\n2.1 Parser (internal/fem/parser.go):\n- Add patterns for delete, question, expand, keep, unclear\n- All 6 types: comment, delete, question, expand, keep, unclear\n\n2.2 TUI Model (internal/tui/tui.go):\n- Add Type field to Annotation struct\n- Add markers map for type-to-FEM-syntax mapping\n- Update save() to use correct markers per type\n\n2.3 TUI Keybindings:\n- d → delete (prompt: 'Reason for deletion:')\n- q → question (prompt: 'Question:')\n- e → expand (prompt: 'What to expand:')\n- u → unclear (prompt: 'What\\'s unclear:')\n- k (keep) is palette-only (Phase 3)\n\nTests:\n- Parser tests for all 6 annotation types\n- TUI tests for all keybindings\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-2","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:28:03.213453066-03:00","created_by":"charly vibes","updated_at":"2026-01-12T18:48:30.236492128-03:00","closed_at":"2026-01-12T18:48:30.236492128-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-uhy","depends_on_id":"fabbro-99b","type":"blocks","created_at":"2026-01-12T18:30:30.205391318-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-vjj","title":"Implement fabbro prime command for AI-optimized workflow context","description":"Add a new fabbro prime command. When executed, this command should output a concise, AI-optimized summary of how to use fabbro, including: Core purpose and functionality. Key commands for initialization, review, application, and session management. Brief explanation of FEM syntax. Links to relevant documentation (README, CLI, TUI, FEM). The output should be designed to quickly onboard an AI agent to the fabbro workflow.","status":"open","priority":2,"issue_type":"feature","owner":"charly.vibes@proton.me","created_at":"2026-01-27T21:44:11.053132885-03:00","created_by":"charly vibes","updated_at":"2026-01-27T21:44:11.053132885-03:00","labels":["ai","cli"]}
{"id":"fabbro-vs4","title":"SEC-001: Increase session ID entropy (CRITICAL)","description":"Session ID uses only 2 bytes of randomness (65,536 combinations). Causes test flakiness and collision risk.\n\n**Location:** internal/session/session.go#L21-L27\n\n**Fix:**\n- Increase to 8 bytes (64 bits)\n- Handle rand.Read errors\n- Add collision detection retry loop\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":0,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:17:56.006836816-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:42:13.302607324-03:00","closed_at":"2026-01-14T13:42:13.302607324-03:00","close_reason":"Closed"}
{"id":"fabbro-wwh","title":"Phase 3: fabbro review --stdin command","description":"Implement fabbro review --stdin command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 3)\n\nFiles:\n- cmd/fabbro/main.go: review subcommand with --stdin flag\n- internal/session/session.go: Session struct, Create(), Load()\n\nSession struct: ID, Content, CreatedAt\nSession file format (.fem):\n---\nsession_id: abc123\ncreated_at: 2026-01-11T10:00:00Z\n---\n\u003ccontent\u003e\n\nBehavior:\n- Check initialization, error if not\n- Read stdin, create session file\n- Launch TUI (Phase 4)\n\nSuccess criteria:\n- go test ./... passes\n- echo 'test' | fabbro review --stdin creates session in .fabbro/sessions/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.537677993-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:18:44.629162698-03:00","closed_at":"2026-01-11T19:18:44.629162698-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-wwh","depends_on_id":"fabbro-529","type":"blocks","created_at":"2026-01-11T18:30:08.28037922-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-xtx","title":"Change application quit mechanism to CTRL+C twice for consistency with CLI tools.","description":"Change application quit mechanism to CTRL+C twice for consistency with CLI tools.\n\n## Rationale\n\nMany CLI tools (node REPL, psql, etc.) use double CTRL+C to quit, preventing accidental exits.\n\n## Implementation\n\nModify `internal/tui/tui.go` to:\n1. Track last CTRL+C timestamp\n2. On first CTRL+C: show \"Press CTRL+C again to quit\" in status bar\n3. On second CTRL+C within 2 seconds: quit\n4. Remove Q key quit binding\n\n## Files\n\n- `internal/tui/tui.go` - key handling changes\n\n### Acceptance Criteria:\n- [ ] Pressing CTRL+C once shows warning message, does not quit\n- [ ] Pressing CTRL+C again within 2 seconds quits\n- [ ] After 2 seconds, the warning resets (requires two presses again)\n- [ ] Q key no longer quits the application\n\n### Verification Steps:\n1. Start fabbro\n2. Press Q - verify nothing happens\n3. Press CTRL+C once - observe warning message\n4. Wait 3 seconds, press CTRL+C - observe warning resets\n5. Press CTRL+C twice quickly - verify app quits","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:03.748730289-03:00","created_by":"charly vibes","updated_at":"2026-01-26T14:26:56.769494988-03:00","closed_at":"2026-01-26T14:26:56.769494988-03:00","close_reason":"Closed"}
{"id":"fabbro-yav","title":"MAINT-001: Standardize time format to time.RFC3339","description":"Two different time format strings for same purpose:\n- session.go#L41: time.RFC3339\n- tui.go#L301: hardcoded string\n\n**Fix:** Use time.RFC3339 consistently in both locations.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:37.78131581-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:51:29.784191047-03:00","closed_at":"2026-01-14T13:51:29.784191047-03:00","close_reason":"Closed"}
{"id":"fabbro-ydd","title":"Tag spec scenarios as Implemented/Planned/Not Implemented","description":"Add status comments to each scenario in .feature files: # Status: Implemented / # Status: Planned (Phase N) / # Status: Not Implemented. Prevents confusion about what actually works.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:06.223050689-03:00","created_by":"charly vibes","updated_at":"2026-01-13T16:06:36.382682487-03:00","closed_at":"2026-01-13T16:06:36.382682487-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-ydd","depends_on_id":"fabbro-ywn","type":"blocks","created_at":"2026-01-13T14:43:30.25965087-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-ywn","title":"Create spec-coverage matrix with implementation status","description":"Create docs/spec-coverage.md listing each scenario from specs 01-06 with status: Implemented/Partial/Not Implemented/Deprecated. Use tracer+post-tracer plans to populate.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:05.788469831-03:00","created_by":"charly vibes","updated_at":"2026-01-13T15:00:58.325064449-03:00","closed_at":"2026-01-13T15:00:58.325064449-03:00","close_reason":"Closed"}
{"id":"fabbro-zez","title":"We should evaluate a better way to handle multiple annotations in same regions, for example currently its creating nested annotations that will require a lot of logic to diagnose.","description":"Evaluate better ways to handle multiple annotations in the same code regions, specifically addressing the current issue of nested annotations which complicates diagnosis and processing.\n\n### Deliverable:\n- A short report (e.g., Markdown file) outlining:\n    - Analysis of current nested annotation problems.\n    - Research into common strategies for multi-annotation handling (e.g., layering, explicit conflict resolution, merging).\n    - Proposed solution(s) with pros, cons, and impact on FEM parsing/rendering.\n\n### Verification Steps:\n1. Review the generated report for completeness and clarity.\n2. Confirm that alternative strategies are explored and a proposal is made.\n3. Ensure the impact on existing FEM handling is considered.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:26:57.971173732-03:00","created_by":"charly vibes","updated_at":"2026-01-26T12:52:54.101050197-03:00","closed_at":"2026-01-26T12:52:54.101050197-03:00","close_reason":"Closed"}
{"id":"fabbro-zwk","title":"Canonicalize JSON schema for fabbro apply","description":"CRITICAL: Spec 04 uses sessionId, startLine/endLine; code uses session_id, line. This breaks Amp integration. Pick one schema, update spec + FEM struct + tracer docs.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:42:50.09813715-03:00","created_by":"charly vibes","updated_at":"2026-01-13T14:52:03.710134335-03:00","closed_at":"2026-01-13T14:52:03.710134335-03:00","close_reason":"Closed"}
