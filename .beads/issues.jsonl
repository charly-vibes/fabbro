{"id":"fabbro-0bl","title":"MAINT-002: Inject io.Writer for TUI error logging","description":"TUI writes errors directly to os.Stderr, making it harder to test.\n\n**Location:** internal/tui/tui.go#L204-L205\n\n**Fix:** Add logWriter io.Writer field to Model, default to os.Stderr, use in error handling.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:15.134759015-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:55:02.659287083-03:00","closed_at":"2026-01-14T13:55:02.659287083-03:00","close_reason":"Closed"}
{"id":"fabbro-0f3","title":"Prompt for confirmation before quitting the application.","description":"Prompt for confirmation before quitting the application (e.g., when pressing 'Q' or attempting to close the window).\n\n### Acceptance Criteria:\n- [ ] When an exit action is initiated (e.g., 'Q' or similar, depending on other related issues), a confirmation prompt appears (e.g., 'Are you sure you want to quit? (y/N)').\n- [ ] Typing 'y' or 'Y' confirms quitting.\n- [ ] Typing 'n' or 'N' (or any other input) cancels quitting and returns to the application.\n- [ ] If changes are unsaved, the prompt should warn the user about unsaved changes.\n\n### Verification Steps:\n1. Start fabbro.\n2. Initiate a quit action.\n3. Verify the confirmation prompt appears.\n4. Test with 'y', 'Y', 'n', 'N', and other inputs.\n5. Make unsaved changes, initiate quit, and verify unsaved changes warning.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:32:52.49326913-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:42:06.115525932-03:00"}
{"id":"fabbro-128","title":"SEC-003: Add input size limits for review command","description":"io.ReadAll(stdin) and os.ReadFile() have no size limits. Huge inputs cause OOM.\n\n**Location:** cmd/fabbro/main.go#L82-L96\n\n**Fix:** Add maxInputBytes constant (10MB), use io.LimitReader for stdin, check file size before reading.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:17.572220806-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:47:53.60099862-03:00","closed_at":"2026-01-14T13:47:53.60099862-03:00","close_reason":"Closed"}
{"id":"fabbro-1jz","title":"Improve session naming convention","description":"Sessions need clearer naming with prefix or intuitive convention. Research how beads and openspec handle naming for inspiration. Consider project prefix, date, or semantic names.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:42.324931322-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:11:00.766678885-03:00","closed_at":"2026-01-14T12:11:00.766678885-03:00","close_reason":"Session IDs now use YYYYMMDD-xxxx format (e.g., 20260114-373a)"}
{"id":"fabbro-1ps","title":"Phase 3: Handle save() error","description":"Change save() to return error, print to stderr on failure so user knows if work is lost.\n\nFiles: internal/tui/tui.go, internal/tui/tui_test.go\nSuccess: Save errors printed to stderr, test for error path\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-3","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.311626689-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:42:06.404532136-03:00","closed_at":"2026-01-12T22:42:06.404532136-03:00","close_reason":"Closed"}
{"id":"fabbro-1xg","title":"Split hotkey bar: general commands vs markup commands","description":"Divide the hotkey description line into two: one for general commands (quit, write, select) and one for markup-specific commands. Consider top/bottom or context-aware display.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:57:58.135963353-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:53:22.967238119-03:00","closed_at":"2026-01-14T13:53:22.967238119-03:00","close_reason":"Closed"}
{"id":"fabbro-23g","title":"Phase 6: Coverage push to 85%","description":"Refactor main.go for testability and add CLI tests.\n\nFile: cmd/fabbro/main.go\n\nRefactor to realMain() pattern:\nfunc main() {\n    os.Exit(realMain(os.Args[1:], os.Stdin, os.Stdout, os.Stderr))\n}\n\nfunc realMain(args []string, stdin io.Reader, stdout, stderr io.Writer) int {\n    // ... all logic here\n}\n\nAdd tests for:\n- CLI command parsing\n- Error paths (not initialized, bad session ID, etc.)\n- init when already initialized\n- review without --stdin flag\n\nSuccess:\n- just check-coverage passes (≥85%)\n- go test ./... passes\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-6","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:30:03.908158764-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:47:06.711810423-03:00","closed_at":"2026-01-12T21:47:06.711810423-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-23g","depends_on_id":"fabbro-86p","type":"blocks","created_at":"2026-01-12T18:30:30.396170791-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-23g","depends_on_id":"fabbro-3j3","type":"blocks","created_at":"2026-01-12T18:30:30.461140437-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-23g","depends_on_id":"fabbro-d7p","type":"blocks","created_at":"2026-01-12T18:30:30.527129983-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-2da","title":"REQ-001: Fix TUI save off-by-one bug (HIGH)","description":"Annotations are NEVER saved due to off-by-one bug:\n- annotationsByLine uses 1-based StartLine as keys\n- Loop uses 0-based index i for lookup\n- Result: all lookups miss, no FEM markers written\n\n**Location:** internal/tui/tui.go#L280-L292\n\n**Fix:** Use lineNum := i + 1 for lookup, also change to map[int][]fem.Annotation for multiple annotations per line.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:03.650716269-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:44:16.866823352-03:00","closed_at":"2026-01-14T13:44:16.866823352-03:00","close_reason":"Closed"}
{"id":"fabbro-3e3","title":"Add CONTRIBUTING.md with dev workflow","description":"Create contributor guide.\n\nLocation: CONTRIBUTING.md\n\nContent:\n- Development setup (just setup)\n- Testing workflow (just test, just test-all)\n- Pre-push hooks (lefthook)\n- Conventional commits format\n- Spec-driven development process\n- Code review expectations\n\nSource: AGENTS.md has the workflow documented","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:06:37.103952168-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.957698767-03:00","closed_at":"2026-01-12T17:46:05.957698767-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-3e3","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.591525948-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-3j3","title":"Phase 3: SPC command palette","description":"Add Helix-style SPC menu for annotation discoverability.\n\nFile: internal/tui/tui.go\n\n- Add modePalette to mode enum\n- SPC key opens palette overlay\n- Palette shows: [c] comment [d] delete [e] expand [q] question [k] keep [u] unclear\n- k (keep) is ONLY available via palette\n- ESC dismisses palette\n- Any annotation key triggers that action\n\nTests:\n- SPC opens palette mode\n- Pressing 'c' in palette triggers comment\n- ESC dismisses without action\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-3","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:28:25.397252142-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:27:04.092919-03:00","closed_at":"2026-01-12T21:27:04.092919-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-3j3","depends_on_id":"fabbro-uhy","type":"blocks","created_at":"2026-01-12T18:30:30.270313472-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-3kq","title":"Evaluate if the .fem file should contain all the original content or if its more efficient to have only the annotated regions.","description":"Evaluate whether the .fem file format should include all original file content or only the annotated regions for storage efficiency and processing.\n\n### Deliverable:\n- A short report (e.g., Markdown file) analyzing:\n    - Storage size implications for both approaches (full content vs. annotated regions only).\n    - Performance impact on loading, saving, and processing .fem files.\n    - Complexity of reconstruction (if only annotated regions are stored).\n    - Recommendation for the optimal approach with rationale.\n\n### Verification Steps:\n1. Review the generated report for completeness and clarity.\n2. Confirm that performance and storage implications are adequately addressed.\n3. Verify that a clear recommendation with supporting rationale is provided.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:22:24.189402749-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:42:28.501528226-03:00"}
{"id":"fabbro-3l6","title":"We need a way to edit the existing annotations. For example, if I select a region and mark it as keep, then I cannot modify my message or the selected region.","description":"Implement functionality to allow users to edit existing annotations, including their associated message and the selected code region.\n\n### Acceptance Criteria:\n- [ ] Users can enter an 'edit mode' for an existing annotation.\n- [ ] In edit mode, the annotation's message text can be modified.\n- [ ] In edit mode, the start and end lines of the annotated region can be adjusted.\n- [ ] Changes made in edit mode can be saved or cancelled.\n- [ ] The edited annotation's properties are correctly reflected in the .fem file.\n\n### Verification Steps:\n1. Create an annotation.\n2. Enter edit mode for the annotation.\n3. Modify the message and save. Verify the change.\n4. Enter edit mode, modify the region (start/end lines), and save. Verify the change.\n5. Enter edit mode, make changes, then cancel. Verify changes are not saved.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:12:43.166633247-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:42:51.822317695-03:00"}
{"id":"fabbro-4dj","title":"Add a command to list all available editing sessions.","description":"Add a command to list all available editing sessions.\n\n### Acceptance Criteria:\n- [ ] A new CLI command (e.g., 'fabbro session list') is available.\n- [ ] The command lists all saved editing sessions, showing at least their ID, creation date, and associated file.\n- [ ] Output is clear and user-friendly.\n\n### Verification Steps:\n1. Run 'fabbro session list'.\n2. Verify that all expected sessions are listed.\n3. Check that listed information (ID, date, file) is correct.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:34.787661474-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:41:26.707932448-03:00"}
{"id":"fabbro-4v1","title":"SPC palette: always available, markup options conditional on selection","description":"Keep SPC as a general menu (like Helix) that's always available. General commands always visible, but markup-related options only shown when there's an active selection.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:25.075350434-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:29:59.355172248-03:00","closed_at":"2026-01-14T15:29:59.355172248-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-4v1","depends_on_id":"fabbro-tta","type":"blocks","created_at":"2026-01-14T10:29:39.474397472-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-529","title":"Phase 2: fabbro init command","description":"Implement fabbro init command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 2)\n\nFiles:\n- cmd/fabbro/main.go: root cobra command + init subcommand\n- internal/config/config.go: IsInitialized(), Init()\n\nBehavior:\n- Creates .fabbro/sessions/ directory\n- Idempotent (prints 'already initialized' if exists)\n\nTracer bullet scope:\n- NO config.yaml (defer)\n- NO templates/ (defer)\n- NO .gitignore (defer)\n\nSuccess criteria:\n- go test ./... passes\n- fabbro init creates .fabbro/sessions/\n- Running again prints 'already initialized'","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.419840908-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:14:40.264966292-03:00","closed_at":"2026-01-11T19:14:40.264966292-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-529","depends_on_id":"fabbro-9t9","type":"blocks","created_at":"2026-01-11T18:30:08.169727743-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-73g","title":"Define v behavior in select mode (toggle off or expand)","description":"Pressing v while in select mode has unclear behavior. Should either toggle off (cancel selection, back to navigate) or expand mode (line → block like Vim). Needs clear feedback.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:35.66836176-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:16:01.936869819-03:00","closed_at":"2026-01-14T12:16:01.936869819-03:00","close_reason":"v now consistently toggles selection off (single or multi-line)"}
{"id":"fabbro-7et","title":"Document Claude Code integration","description":"Document how to integrate fabbro with Claude Code.\n\nLocation: docs/claude-code-integration.md\n\nContent:\n- SessionStart hook setup\n- Slash command usage (/fabbro review)\n- Workflow examples\n- MCP server option (if implemented)\n\nSource: research/2026-01-09-fabbro-design-document.md has integration patterns","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:06:31.271146532-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.877004456-03:00","closed_at":"2026-01-12T17:46:05.877004456-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-7et","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.531377958-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-86p","title":"Phase 5: Multi-line selection","description":"Replace single-line selection with range selection.\n\nFile: internal/tui/tui.go\n\nChange from 'selected int' to:\ntype selection struct {\n    active bool\n    anchor int  // where selection started\n    cursor int  // current end of selection\n}\n\nBehavior:\n- v toggles selection mode\n- In selection mode, j/k extends selection from anchor\n- ESC clears selection\n- Any annotation key operates on selected range\n\nView changes:\n- Highlight all lines in selection range\n- Status bar shows 'N lines selected'\n\nTests:\n- v starts selection at current line\n- j/k in selection extends range\n- annotation applies to full range\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-5","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:29:41.534236799-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:41:20.010246689-03:00","closed_at":"2026-01-12T21:41:20.010246689-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-86p","depends_on_id":"fabbro-uhy","type":"blocks","created_at":"2026-01-12T18:30:30.33317208-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-88t","title":"Phase 4: Minimal TUI","description":"Implement minimal TUI with bubbletea.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 4)\n\nFile: internal/tui/tui.go\n\nKeybindings (tracer bullet only):\n- j/k: navigate lines\n- v: toggle line selection\n- c: add comment (opens text input)\n- w: save and exit\n- q: quit without saving\n\nModel state:\n- content []string\n- cursor int\n- selected int (-1 if none)\n- annotations []Annotation\n- mode string (normal|input)\n- input string\n\nUI layout:\n─── Review: abc123 ───\n  1 │ Line content\n  2 │ Selected line  ← SELECTED\n  3 │ Another line\n──────────────────────\n[v]select [c]omment [w]rite [q]uit\n\nOn save: insert FEM markup, write to session file\n\nSuccess criteria:\n- go test ./... passes\n- TUI displays, navigates, accepts comment, saves","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.655896205-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:54:53.597388337-03:00","closed_at":"2026-01-11T20:54:53.597388337-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-88t","depends_on_id":"fabbro-wwh","type":"blocks","created_at":"2026-01-11T18:30:08.390427543-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-99b","title":"Phase 1: Fix q/Q quit keybinding conflict","description":"Change quit from q to Q (shift+q) so q is available for question annotation.\n\nFile: internal/tui/tui.go\n- Change quit keybinding from 'q' to 'Q'\n- Update help text in View()\n\nTests:\n- Q quits without saving\n- q no longer quits\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-1","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:27:13.420755277-03:00","created_by":"charly vibes","updated_at":"2026-01-12T18:39:25.052553314-03:00","closed_at":"2026-01-12T18:39:25.052553314-03:00","close_reason":"Closed"}
{"id":"fabbro-9bn","title":"Phase 2: Consolidate FEM markers","description":"Extract shared FEM marker definitions to fem/markers.go, remove duplicate from tui.\n\nFiles: internal/fem/markers.go (new), internal/fem/parser.go, internal/tui/tui.go\nSuccess: Single source of truth for marker delimiters\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-2","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.233525378-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:50:38.501051035-03:00","closed_at":"2026-01-12T22:50:38.501051035-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-9bn","depends_on_id":"fabbro-tha","type":"blocks","created_at":"2026-01-12T21:57:52.09069559-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-9gi","title":"Visual indicator for annotated sections","description":"Show visual indication in the TUI for sections that already have annotations. Makes it clear what areas have been marked up during review.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:15:12.375936786-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:08:07.183670014-03:00","closed_at":"2026-01-14T16:08:07.183670014-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-9gi","depends_on_id":"fabbro-l0t","type":"blocks","created_at":"2026-01-14T10:29:39.235731124-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-9pm","title":"OPS-001: Tighten file permissions for sessions","description":"Sessions may contain proprietary code. Current 0644/0755 permissions allow other users to read on shared systems.\n\n**Locations:**\n- session.go#L44: 0644\n- tui.go#L304: 0644\n- config.go#L14: 0755\n\n**Fix:** Use 0600 for files, 0700 for directories.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:25:31.189204319-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:12:29.19669301-03:00","closed_at":"2026-01-14T15:12:29.19669301-03:00","close_reason":"Closed"}
{"id":"fabbro-9qv","title":"When hitting W to write nothing seems to happen. We need to notify that the changes were saved.","description":"Implement a visual or textual notification to the user when changes are successfully saved after pressing 'W'.\n\n### Acceptance Criteria:\n- [ ] A brief, non-intrusive notification (e.g., 'Saved changes.' message in status bar, or temporary visual cue) appears upon successful save.\n- [ ] The notification is visible for a short duration (e.g., 2-3 seconds) and then disappears.\n- [ ] No notification appears if there are no changes to save.\n\n### Verification Steps:\n1. Open a file in fabbro.\n2. Make some changes.\n3. Press 'W' and observe the save notification.\n4. Press 'W' again without making changes and verify no notification appears.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:13:46.90667331-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:42:40.011315431-03:00"}
{"id":"fabbro-9r3","title":"Document shell completion command","description":"fabbro completion exists (standard Cobra feature) but is not documented in README or docs. Users can't discover it. Add documentation for bash/fish/zsh/powershell completions.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:57.743554421-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:12:11.020622301-03:00","closed_at":"2026-01-14T12:12:11.020622301-03:00","close_reason":"Added shell completion documentation to README.md"}
{"id":"fabbro-9t9","title":"Phase 1: Project Setup","description":"Create Go project structure and dependencies.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 1)\n\nStructure:\n- cmd/fabbro/main.go\n- internal/config/config.go\n- internal/session/session.go\n- internal/fem/parser.go\n- internal/tui/tui.go\n- go.mod (github.com/charly-vibes/fabbro)\n\nDependencies: cobra, bubbletea, lipgloss\n\nSuccess criteria:\n- go mod tidy succeeds\n- go build ./... succeeds","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.281475211-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:12:31.731998272-03:00","closed_at":"2026-01-11T19:12:31.731998272-03:00","close_reason":"Closed"}
{"id":"fabbro-9vc","title":"Review annotation behavior for multi-line selections","description":"Review the current annotation behavior for multi-line selections.\n[REQ-001] tui.go:315-322 creates one annotation per line in a selection.                        \n\nCurrent behavior:                                                                               \n\n• User selects lines 5-10                                                                       \n• User adds comment 'fix this'                                                                  \n• 6 separate annotations created, each with identical text                                      \n\nCode:                                                                                           \n\n    for line := start; line \u003c= end; line++ {                                                      \n        m.annotations = append(m.annotations, fem.Annotation{                                     \n            StartLine: line + 1,                                                                  \n            EndLine:   line + 1,                                                                  \n            Type:      m.inputType,                                                               \n            Text:      text, # Same text for every line                                          \n        })                                                                                        \n    }                                                                                             \n\nQuestions to resolve:                                                                           \n\n1. Is this intentional for inline FEM markers?                                                  \n2. Should we create a single annotation with StartLine=5, EndLine=10 instead?                   \n3. How does this affect the apply command output?                                               \n\nRef: Code review 2026-01-19                                                                     \n\n### Deliverable:\n- A brief analysis document (e.g., Markdown file) answering the questions posed in the description and providing a recommendation for the desired behavior for multi-line annotations.\n\n### Verification Steps:\n1. Review the analysis document for clear answers to the questions.\n2. Confirm that a recommendation for behavior is provided.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:38:01.59821411-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:17.761239065-03:00"}
{"id":"fabbro-9y0","title":"Investigate gemini-cli interactive shell detection for merge commits","description":"gemini-cli detected that a shell command was interactive (expecting user to close a merge commit editor). Investigate how they detect TTY/interactive shells and whether fabbro could use similar detection for:\n- Knowing when to wait for user input vs timeout\n- Detecting when editor commands are invoked\n- Better handling of interactive git operations (merge, rebase, commit --amend)\n\nDeliverable: research doc in research/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T22:25:01.05496576-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:11.153022751-03:00","closed_at":"2026-01-14T16:21:11.153022751-03:00","close_reason":"Closed"}
{"id":"fabbro-a0c","title":"Setup CI/CD pipeline with GitHub Actions","description":"CI/CD infrastructure using justfile commands for local/CI parity.\n\nFiles created:\n- .github/workflows/ci.yml - runs 'just ci'\n- justfile - unified commands (test, lint, check-coverage, build)\n- lefthook.yml - pre-push hook runs 'just pre-push'\n\nSee: plans/2026-01-11-testing-strategy.md","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:55:51.401740943-03:00","created_by":"charly vibes","updated_at":"2026-01-11T18:56:00.820018973-03:00","closed_at":"2026-01-11T18:56:00.820018973-03:00","close_reason":"Closed"}
{"id":"fabbro-a32","title":"We should add a command to resume editing sessions and a list command too.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:18:36.966028314-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:33:42.325876707-03:00","closed_at":"2026-01-19T19:33:42.325876707-03:00","close_reason":"Split into two new issues for better scope and atomicity."}
{"id":"fabbro-afj","title":"MAINT-003: Centralize annotation type definitions","description":"Annotation types (comment, delete, etc.) hardcoded in multiple places:\n- tui.go inputPrompts map\n- tui.go hardcoded inputType strings\n- fem/markers.go Markers map\n\n**Fix:** Define AnnotationTypes once in fem package, validate against it.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:26.237223253-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:08:09.609837475-03:00","closed_at":"2026-01-14T15:08:09.609837475-03:00","close_reason":"Closed"}
{"id":"fabbro-aqb","title":"OPS-002: Include session ID in error messages","description":"Error messages in apply command don't always include the session ID being operated on.\n\n**Location:** cmd/fabbro/main.go#L135-L141\n\n**Fix:** Use fmt.Errorf with session ID: 'failed to load session %q: %w'\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:25:46.005976247-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:13:09.530679393-03:00","closed_at":"2026-01-14T16:13:09.530679393-03:00","close_reason":"Closed"}
{"id":"fabbro-at2","title":"Create README.md with project overview","description":"Create comprehensive README.md for the project.\n\nSections:\n- Project description (what fabbro does)\n- Installation instructions\n- Quick start guide\n- Basic usage examples\n- Link to full documentation\n\nShould be created after tracer bullet proves the concept works.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:04:59.717798041-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.553143198-03:00","closed_at":"2026-01-12T17:46:05.553143198-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-at2","depends_on_id":"fabbro-n6h","type":"blocks","created_at":"2026-01-11T19:06:45.288764005-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-c5b","title":"Improve selection mode visual feedback","description":"When in select mode, it's not clear that moving around expands the selection context. Add visual indication like highlighting the growing selection or showing line count.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:06.00542982-03:00","created_by":"charly vibes","updated_at":"2026-01-14T14:01:14.89289618-03:00","closed_at":"2026-01-14T14:01:14.89289618-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-c5b","depends_on_id":"fabbro-73g","type":"blocks","created_at":"2026-01-14T10:29:39.580461297-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-cm0","title":"Phase 4: Remove custom max()","description":"Delete custom max() function - Go 1.22 has builtin.\n\nFiles: internal/tui/tui.go\nSuccess: grep 'func max' internal/ returns nothing\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-4","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.387670389-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:37:55.209586953-03:00","closed_at":"2026-01-12T22:37:55.209586953-03:00","close_reason":"Closed"}
{"id":"fabbro-cur","title":"REQ-003: Add FEM parser edge case tests and docs","description":"Parser limitations not tested or documented:\n1. Single-line only (no multi-line annotations)\n2. Unbalanced markers left in cleanContent\n3. Nested markers undefined behavior\n\n**Fix:**\n- Add tests for: unbalanced markers, multiple annotations per line, nested markers\n- Document limitations in README and docs/fem.md\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:34.383165606-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:06:02.460603899-03:00","closed_at":"2026-01-14T15:06:02.460603899-03:00","close_reason":"Closed"}
{"id":"fabbro-d3d","title":"Research non-obtrusive TUI UX for agent workflows","description":"Investigate how to make fabbro TUI imperceptible/non-obtrusive when working in CLI agent workflows.\n\nQuestions to answer:\n- How do other TUI tools launch without disrupting terminal flow?\n- Should fabbro open in a new terminal tab/pane vs inline?\n- tmux/zellij integration patterns?\n- Background session creation + notification when ready?\n- Floating/overlay TUI patterns (like fzf)?\n\nReference tools to study:\n- fzf (floating picker)\n- lazygit (full-screen but fast)\n- gum (inline prompts)\n- charmbracelet/pop (notifications)\n- Elia TUI\n- How Amp's 'open in editor' feels seamless\n\nGoal: Define UX requirements for fabbro that feel native to agent workflows.\n\nDeliverable: research doc in research/ with UX requirements","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T18:48:44.74240606-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:02.262973314-03:00","closed_at":"2026-01-14T16:21:02.262973314-03:00","close_reason":"Closed"}
{"id":"fabbro-d7p","title":"Phase 4: Improved navigation","description":"Add page navigation and jump commands.\n\nFile: internal/tui/tui.go\n\nKeybindings:\n- Ctrl+d → scroll down half page\n- Ctrl+u → scroll up half page\n- g → start g-pending mode\n- gg (g then g) → jump to first line\n- G → jump to last line\n\nImplementation:\n- Track gPending bool in model\n- Any key other than g clears pending state\n\nTests:\n- Ctrl+d moves cursor down by half viewport\n- gg moves to line 0\n- G moves to last line\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-4","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:29:04.363012449-03:00","created_by":"charly vibes","updated_at":"2026-01-12T21:35:46.478717945-03:00","closed_at":"2026-01-12T21:35:46.478717945-03:00","close_reason":"Closed"}
{"id":"fabbro-d7x","title":"REQ-004: Error on conflicting --stdin and file args","description":"If user passes both --stdin and a file path, stdin silently wins. User may not realize their file was ignored.\n\n**Location:** cmd/fabbro/main.go#L82-L99\n\n**Fix:** Return error: 'cannot use both --stdin and a file path'\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:21:44.808359165-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:10:52.781512587-03:00","closed_at":"2026-01-14T15:10:52.781512587-03:00","close_reason":"Closed"}
{"id":"fabbro-d8r","title":"Phase 5: FEM Parser","description":"Implement FEM parser for comment annotations.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 5)\n\nFile: internal/fem/parser.go\n\nTypes:\n- Annotation{Type, Text, Line}\n\nFunction:\n- Parse(content string) ([]Annotation, cleanContent string, error)\n\nTracer bullet scope:\n- Only parse {\u003e\u003e comment \u003c\u003c} markers\n- Other annotation types deferred\n\nParsing strategy:\n- Regex-based for tracer bullet\n- Find {\u003e\u003e ... \u003c\u003c} patterns\n- Extract text, determine line number\n- Return clean content with markers stripped\n\nSuccess criteria:\n- Test: {\u003e\u003e hello \u003c\u003c} extracts annotation with text 'hello'\n- Test: multiple annotations on different lines\n- Can parse session file created by TUI","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.776341812-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:56:09.5312925-03:00","closed_at":"2026-01-11T20:56:09.5312925-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-d8r","depends_on_id":"fabbro-88t","type":"blocks","created_at":"2026-01-11T18:30:08.502305512-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-drm","title":"Document CLI commands and flags","description":"Create CLI reference documentation.\n\nLocation: docs/cli-reference.md\n\nCommands to document:\n- fabbro init [--quiet]\n- fabbro review \u003cfile\u003e | --stdin [--editor] [--no-interactive] [--id]\n- fabbro apply \u003csession-id\u003e [--json]\n- fabbro resume \u003csession-id\u003e\n- fabbro sessions [--list]\n- fabbro show \u003csession-id\u003e\n\nInclude exit codes and error messages.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:25.629548546-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.714104389-03:00","closed_at":"2026-01-12T17:46:05.714104389-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-drm","depends_on_id":"fabbro-q57","type":"blocks","created_at":"2026-01-11T19:06:45.410231862-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-e1d","title":"w key should write only, not write and quit","description":"Currently w writes and quits. Should only save the session. Separate write and quit into distinct actions for better control.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:02:18.189390565-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:03:47.747935233-03:00","closed_at":"2026-01-14T12:03:47.747935233-03:00","close_reason":"w key now saves without quitting. Q or Ctrl+C to quit."}
{"id":"fabbro-eeq","title":"Inline text editing/change annotation","description":"Add ability to directly edit or propose changes to text inline, not just annotate. Would allow marking a selection and providing replacement text as a suggested change.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:12:41.301445617-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:01:20.366881439-03:00","closed_at":"2026-01-14T16:01:20.366881439-03:00","close_reason":"Closed"}
{"id":"fabbro-ejx","title":"Epic: Pluggable annotation parser architecture","description":"Refactor FEM parser to support multiple annotation formats via a parser interface. This enables:\n\n1. Current FEM syntax ({\u003e\u003e \u003c\u003c}) for backward compatibility\n2. Markdown HTML comments (\u003c!-- fabbro:comment: --\u003e) for LLM-friendly markdown files\n3. Language-native comments (// fabbro:comment:) for source code files\n\nKey design:\n- Parser interface with Parse(content) -\u003e []Annotation\n- Format auto-detection or explicit --format flag\n- Configurable output format\n\nResearch: research/2026-01-14-markdown-comment-markup.md","status":"open","priority":3,"issue_type":"epic","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:55:48.286117573-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:55:48.286117573-03:00","dependencies":[{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-gt1","type":"blocks","created_at":"2026-01-14T16:56:46.401189311-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-kvs","type":"blocks","created_at":"2026-01-14T16:56:46.477349403-03:00","created_by":"charly vibes"},{"issue_id":"fabbro-ejx","depends_on_id":"fabbro-nts","type":"blocks","created_at":"2026-01-14T16:56:46.552595265-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-gia","title":"Implement fabbro review \u003cfilename\u003e","description":"Currently fabbro review only accepts --stdin. The spec (02_review_session.feature) defines 'fabbro review document.md' but it's not implemented yet.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:59:13.584254638-03:00","created_by":"charly vibes","updated_at":"2026-01-14T11:58:35.692261181-03:00","closed_at":"2026-01-14T11:58:35.692261181-03:00","close_reason":"Closed"}
{"id":"fabbro-gt1","title":"Build markdown-comment annotation test corpus (20-50 cases)","description":"Create test cases for evaluating AI model performance with different annotation formats.\n\nCategories:\n- Simple: Single annotation per file\n- Dense: Multiple annotations, various types\n- Edge cases: Nested quotes, special chars\n- Language variety: Go, Python, JS, Rust embedded in markdown\n\nFrom: research/2026-01-14-markdown-comment-markup.md (COMP-001, ACT-001)","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:55:59.492986385-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:55:59.492986385-03:00"}
{"id":"fabbro-hxo","title":"SEC-004: Check sessions dir in IsInitialized","description":"IsInitialized only checks .fabbro/, not .fabbro/sessions/. If sessions/ was deleted, review proceeds then fails at write time.\n\n**Location:** internal/config/config.go#L8-L11\n\n**Fix:** Also check SessionsDir exists.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:30.776031378-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:49:28.186449379-03:00","closed_at":"2026-01-14T13:49:28.186449379-03:00","close_reason":"Closed"}
{"id":"fabbro-k2q","title":"Selection hidden when expanding upward from bottom of viewport","description":"When starting a selection at the last visible line on screen and moving up, the selection becomes hidden because the viewport doesn't scroll to keep it visible. Viewport should follow the selection anchor/cursor.","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:08:14.316986833-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:01:50.708245495-03:00","closed_at":"2026-01-14T12:01:50.708245495-03:00","close_reason":"Tests confirm viewport scrolling works correctly. Added TestViewportScrollsUpWhenSelecting to verify cursor stays visible when selecting upward."}
{"id":"fabbro-kvs","title":"Create annotation format evaluation harness","description":"Create an annotation format evaluation harness.\nBuild tooling to compare AI model performance across annotation formats.                        \n\nMetrics:                                                                                        \n\n• Extraction accuracy (% correctly parsed)                                                      \n• Position accuracy (% attached to correct line)                                                \n• Type accuracy (% correct annotation type)                                                     \n• Format adherence (% valid syntax)                                                             \n\nFrom: research/2026-01-14-markdown-comment-markup.md                                            \n\n### Deliverable:\n- A functional test harness capable of evaluating AI model performance for different annotation formats based on the specified metrics.\n- Clear instructions on how to use the harness and interpret its results.\n\n### Verification Steps:\n1. Run the evaluation harness with the test corpus (from fabbro-gt1).\n2. Verify that it produces results for the specified metrics (extraction, position, type, format adherence).\n3. Check if the results are consistent and reproducible.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:56:08.971300717-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:52.718595396-03:00","dependencies":[{"issue_id":"fabbro-kvs","depends_on_id":"fabbro-gt1","type":"blocks","created_at":"2026-01-19T19:35:25.831027251-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-kyl","title":"Add a command to resume previous editing sessions.","description":"Add a command to resume previous editing sessions.\n\n### Acceptance Criteria:\n- [ ] A new CLI command (e.g., 'fabbro session resume \u003csession-id\u003e') is available.\n- [ ] The command successfully reloads a specified saved session state.\n- [ ] The editor view is restored to the state it was in when the session was saved.\n\n### Verification Steps:\n1. Save an editing session with some annotations.\n2. Quit fabbro.\n3. Run 'fabbro session resume \u003csaved-session-id\u003e'.\n4. Verify that the editor opens with the correct file and all annotations are present.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:28.37182794-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:41:39.268148622-03:00","dependencies":[{"issue_id":"fabbro-kyl","depends_on_id":"fabbro-4dj","type":"blocks","created_at":"2026-01-19T19:35:14.467007988-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-l0t","title":"Support multiple/overlapping annotations on same section","description":"Allow multiple annotations on the same text section or intersecting selections. Currently unclear if overlapping annotations are supported.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:15:05.205349296-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:05:30.68745359-03:00","closed_at":"2026-01-14T16:05:30.68745359-03:00","close_reason":"Closed"}
{"id":"fabbro-lbg","title":"Document TUI keybindings","description":"Create TUI keybindings reference.\n\nLocation: docs/tui-keybindings.md (or in README)\n\nSections:\n- Navigation (j/k, gg/G, Ctrl+d/u, /)\n- Selection (v, ap, ab, as, {, })\n- Annotations (SPC menu, c, d, e, q, k, u)\n- Session (w, Ctrl+S, ?, a)\n\nSource: specs/03_tui_interaction.feature","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:57.495371889-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.796266215-03:00","closed_at":"2026-01-12T17:46:05.796266215-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-lbg","depends_on_id":"fabbro-88t","type":"blocks","created_at":"2026-01-11T19:06:45.468907587-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-n1f","title":"Align TUI keybindings - single source of truth","description":"Spec 03 says q=question, Ctrl+C/ESC=exit. Post-tracer changed quit to Q. Code, spec, and help text are inconsistent. Document authoritative keybindings, sync all sources.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:05.173051967-03:00","created_by":"charly vibes","updated_at":"2026-01-13T14:58:35.111690869-03:00","closed_at":"2026-01-13T14:58:35.111690869-03:00","close_reason":"Closed"}
{"id":"fabbro-n6h","title":"Phase 7: Integration Test","description":"Implement tiered testing strategy per plans/2026-01-11-testing-strategy.md\n\nTiers:\n- Tier 1: Unit tests (default, \u003c1s, 98% coverage)\n- Tier 2: Integration tests (//go:build integration, \u003c10s)\n- Tier 3: Property-based/fuzz tests (//go:build fuzz, \u003c5s)\n\nTotal budget: \u003c15s for all tiers.\n\nCommands:\n- just test (Tier 1)\n- just test-integration (Tier 2)\n- just test-fuzz (Tier 3)\n- just test-all (all tiers)\n- just check-coverage (enforce 98%)","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:58.013377828-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:59:08.794987951-03:00","closed_at":"2026-01-11T20:59:08.794987951-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-n6h","depends_on_id":"fabbro-q57","type":"blocks","created_at":"2026-01-11T18:30:08.727645324-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-nts","title":"Add token count analysis for FEM vs markdown-comment formats","description":"Add token count analysis for FEM vs markdown-comment formats.\nSpecify the intended implementation for the token count analysis, including potential file paths\nfor a new script or the location within an existing tool.                                       \n\n### Deliverable:\n- A script or integrated tool that can analyze the token count differences between FEM and markdown-comment annotation formats.\n- A report or output demonstrating the token count analysis results for a given set of annotated files.\n\n### Verification Steps:\n1. Run the analysis script/tool with sample FEM and markdown-comment files.\n2. Verify that the output correctly reports token counts for both formats.\n3. Ensure the results are clear and comparable.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T16:56:40.035888025-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:41.453933289-03:00","dependencies":[{"issue_id":"fabbro-nts","depends_on_id":"fabbro-kvs","type":"blocks","created_at":"2026-01-19T19:35:32.269253447-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-o5e","title":"We should prompt for confirmation when someone wants to quit and maybe to be consistent with all CLI tools instead of using Q we need to do CTRL+C twice.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:17:07.332163401-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:33:14.778432815-03:00","closed_at":"2026-01-19T19:33:14.778432815-03:00","close_reason":"Split into two new issues for better scope and atomicity."}
{"id":"fabbro-p47","title":"Investigate carapace for shell completions (incl. nushell)","description":"Investigate carapace (https://github.com/rsteube/carapace) as alternative to Cobra completions. Evaluate: nushell support, maintenance burden, feature completeness. Deliverable: research doc in research/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:54:33.431815718-03:00","created_by":"charly vibes","updated_at":"2026-01-14T16:21:28.930564156-03:00","closed_at":"2026-01-14T16:21:28.930564156-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-p47","depends_on_id":"fabbro-9r3","type":"blocks","created_at":"2026-01-14T10:29:39.696178199-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-prd","title":"Add docs reminder to commit workflow in AGENTS.md","description":"Commit workflow should include reminder to update documentation when adding features. Ensures new commands like 'fabbro completion' don't go undocumented.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:59:06.796307823-03:00","created_by":"charly vibes","updated_at":"2026-01-14T12:11:33.142165277-03:00","closed_at":"2026-01-14T12:11:33.142165277-03:00","close_reason":"Added docs reminder to commit workflow in AGENTS.md"}
{"id":"fabbro-q57","title":"Phase 6: fabbro apply --json command","description":"Implement fabbro apply --json command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 6)\n\nFile: cmd/fabbro/main.go (apply subcommand)\n\nBehavior:\n- Load session by ID\n- Parse FEM annotations\n- Output JSON to stdout\n\nJSON format:\n{\n  \"session_id\": \"abc123\",\n  \"annotations\": [\n    {\"type\": \"comment\", \"text\": \"...\", \"line\": 2}\n  ]\n}\n\nSuccess criteria:\n- go test ./... passes\n- fabbro apply \u003cid\u003e --json outputs valid JSON\n- Annotations from TUI appear in output","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.890516041-03:00","created_by":"charly vibes","updated_at":"2026-01-11T20:57:49.372201696-03:00","closed_at":"2026-01-11T20:57:49.372201696-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-q57","depends_on_id":"fabbro-d8r","type":"blocks","created_at":"2026-01-11T18:30:08.618038681-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-r7r","title":"Document FEM markup syntax","description":"Create FEM syntax reference documentation.\n\nLocation: docs/fem-syntax.md (or section in README)\n\nContent:\n- All annotation types with examples\n- Marker reference table\n- Escaping rules\n- Edge cases\n- Session file format (YAML frontmatter)\n\nSource: specs/06_fem_markup.feature has the full spec","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T19:05:17.452244077-03:00","created_by":"charly vibes","updated_at":"2026-01-12T17:46:05.63629999-03:00","closed_at":"2026-01-12T17:46:05.63629999-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-r7r","depends_on_id":"fabbro-d8r","type":"blocks","created_at":"2026-01-11T19:06:45.351670119-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-rdz","title":"Optimize highlight computation for wrapped lines","description":"Optimize highlight computation for wrapped lines.\n[PERF-003] tui.go:456-471 computes highlighting twice for wrapped lines.                        \n\nCurrent code:                                                                                   \n\n• Computes highlightedLine for the full line                                                    \n• If line wraps, recomputes highlighting for each part separately                               \n• The pre-computed highlightedLine is only used when len(wrapped) == 1                          \n\nRecommendation: Restructure to avoid re-tokenizing wrapped line parts. Either:                  \n\n1. Highlight the full line once, then split the ANSI-encoded result                             \n2. Cache tokenization results                                                                   \n3. Only highlight what's visible                                                                \n\nPriority: Low - only affects lines that wrap, minor performance impact.                         \n\n### Acceptance Criteria:\n- [ ] The highlight computation for wrapped lines is refactored to avoid redundant processing.\n- [ ] Performance metrics (e.g., CPU time for rendering wrapped lines) show improvement.\n- [ ] Visual highlighting of wrapped lines remains correct and consistent.\n\n### Verification Steps:\n1. Enable profiling/benchmarking for rendering wrapped lines.\n2. Measure performance before and after the optimization.\n3. Visually inspect files with wrapped lines to ensure correct highlighting.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:37:50.757267931-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:43:31.475424704-03:00"}
{"id":"fabbro-s1h","title":"SEC-002: Validate session frontmatter on load (HIGH)","description":"session.Load silently ignores parse errors:\n- time.Parse errors ignored → zero CreatedAt\n- Missing session_id → empty ID, saves to .fabbro/sessions/.fem\n- No validation → garbage in, garbage out\n\n**Location:** internal/session/session.go#L77-L91\n\n**Fix:** Return errors for missing/invalid fields instead of silently continuing.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":1,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:10.906999186-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:45:46.300361711-03:00","closed_at":"2026-01-14T13:45:46.300361711-03:00","close_reason":"Closed"}
{"id":"fabbro-st1","title":"Add syntax highlighting in TUI","description":"Add syntax highlighting for code content displayed in the review TUI. Would improve readability when reviewing code files.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:10:37.314723012-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:46:26.651171635-03:00","closed_at":"2026-01-14T15:46:26.651171635-03:00","close_reason":"Closed"}
{"id":"fabbro-t19","title":"Add line wrap for long lines in TUI","description":"Long lines should wrap in the TUI viewport instead of being cut off or requiring horizontal scrolling. Improves readability for content with long lines.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T21:11:09.941850732-03:00","created_by":"charly vibes","updated_at":"2026-01-14T15:37:42.031507848-03:00","closed_at":"2026-01-14T15:37:42.031507848-03:00","close_reason":"Closed"}
{"id":"fabbro-tha","title":"Phase 1: Consolidate Annotation type","description":"Remove duplicate Annotation struct from tui package, use fem.Annotation instead.\n\nFiles: internal/tui/tui.go, internal/tui/tui_test.go\nSuccess: grep -r 'type Annotation struct' internal/ shows only fem/parser.go\n\nRef: plans/2026-01-12-tech-debt-cleanup.md#phase-1","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T21:57:42.158116888-03:00","created_by":"charly vibes","updated_at":"2026-01-12T22:46:40.642223823-03:00","closed_at":"2026-01-12T22:46:40.642223823-03:00","close_reason":"Closed"}
{"id":"fabbro-tta","title":"Context-aware hotkey display: show markup only when selected","description":"Show markup shortcuts/commands only when there is an active selection. This reduces cognitive load and creates natural flow: select → see what you can do with selection.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T20:58:17.832225114-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:53:23.116904644-03:00","closed_at":"2026-01-14T13:53:23.116904644-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-tta","depends_on_id":"fabbro-1xg","type":"blocks","created_at":"2026-01-14T10:29:39.36166257-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-ucw","title":"Unify FEM regex patterns with Markers definition","description":"Explain where 'Markers definition' is and provide file paths for both FEM regex patterns and Markers definition. Describe the desired unification outcome.","status":"open","priority":3,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T18:51:23.328107358-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:32:08.730612766-03:00"}
{"id":"fabbro-uhy","title":"Phase 2: All 6 annotation types","description":"Add remaining annotation types to parser and TUI.\n\n2.1 Parser (internal/fem/parser.go):\n- Add patterns for delete, question, expand, keep, unclear\n- All 6 types: comment, delete, question, expand, keep, unclear\n\n2.2 TUI Model (internal/tui/tui.go):\n- Add Type field to Annotation struct\n- Add markers map for type-to-FEM-syntax mapping\n- Update save() to use correct markers per type\n\n2.3 TUI Keybindings:\n- d → delete (prompt: 'Reason for deletion:')\n- q → question (prompt: 'Question:')\n- e → expand (prompt: 'What to expand:')\n- u → unclear (prompt: 'What\\'s unclear:')\n- k (keep) is palette-only (Phase 3)\n\nTests:\n- Parser tests for all 6 annotation types\n- TUI tests for all keybindings\n\nRef: plans/2026-01-12-post-tracer-features.md#phase-2","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-12T18:28:03.213453066-03:00","created_by":"charly vibes","updated_at":"2026-01-12T18:48:30.236492128-03:00","closed_at":"2026-01-12T18:48:30.236492128-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-uhy","depends_on_id":"fabbro-99b","type":"blocks","created_at":"2026-01-12T18:30:30.205391318-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-vs4","title":"SEC-001: Increase session ID entropy (CRITICAL)","description":"Session ID uses only 2 bytes of randomness (65,536 combinations). Causes test flakiness and collision risk.\n\n**Location:** internal/session/session.go#L21-L27\n\n**Fix:**\n- Increase to 8 bytes (64 bits)\n- Handle rand.Read errors\n- Add collision detection retry loop\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":0,"issue_type":"bug","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:17:56.006836816-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:42:13.302607324-03:00","closed_at":"2026-01-14T13:42:13.302607324-03:00","close_reason":"Closed"}
{"id":"fabbro-wwh","title":"Phase 3: fabbro review --stdin command","description":"Implement fabbro review --stdin command.\n\nSee: plans/2026-01-11-tracer-bullet.md (Phase 3)\n\nFiles:\n- cmd/fabbro/main.go: review subcommand with --stdin flag\n- internal/session/session.go: Session struct, Create(), Load()\n\nSession struct: ID, Content, CreatedAt\nSession file format (.fem):\n---\nsession_id: abc123\ncreated_at: 2026-01-11T10:00:00Z\n---\n\u003ccontent\u003e\n\nBehavior:\n- Check initialization, error if not\n- Read stdin, create session file\n- Launch TUI (Phase 4)\n\nSuccess criteria:\n- go test ./... passes\n- echo 'test' | fabbro review --stdin creates session in .fabbro/sessions/","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-11T18:29:57.537677993-03:00","created_by":"charly vibes","updated_at":"2026-01-11T19:18:44.629162698-03:00","closed_at":"2026-01-11T19:18:44.629162698-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-wwh","depends_on_id":"fabbro-529","type":"blocks","created_at":"2026-01-11T18:30:08.28037922-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-xtx","title":"Change application quit mechanism to CTRL+C twice for consistency with CLI tools.","description":"Change application quit mechanism to CTRL+C twice for consistency with CLI tools.\n\n### Acceptance Criteria:\n- [ ] Pressing CTRL+C once does not immediately quit the application.\n- [ ] Pressing CTRL+C a second time within a short interval (e.g., 1-2 seconds) quits the application.\n- [ ] A message is displayed after the first CTRL+C indicating that a second press will quit.\n- [ ] The 'Q' key no longer quits the application.\n\n### Verification Steps:\n1. Start fabbro.\n2. Press 'Q' and verify it does not quit.\n3. Press CTRL+C once and observe the warning message.\n4. Press CTRL+C a second time quickly and verify the application quits.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:33:03.748730289-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:41:53.781141207-03:00"}
{"id":"fabbro-yav","title":"MAINT-001: Standardize time format to time.RFC3339","description":"Two different time format strings for same purpose:\n- session.go#L41: time.RFC3339\n- tui.go#L301: hardcoded string\n\n**Fix:** Use time.RFC3339 consistently in both locations.\n\n**Ref:** research/2026-01-14-rule-of-5-code-review.md","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-14T13:18:37.78131581-03:00","created_by":"charly vibes","updated_at":"2026-01-14T13:51:29.784191047-03:00","closed_at":"2026-01-14T13:51:29.784191047-03:00","close_reason":"Closed"}
{"id":"fabbro-ydd","title":"Tag spec scenarios as Implemented/Planned/Not Implemented","description":"Add status comments to each scenario in .feature files: # Status: Implemented / # Status: Planned (Phase N) / # Status: Not Implemented. Prevents confusion about what actually works.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:06.223050689-03:00","created_by":"charly vibes","updated_at":"2026-01-13T16:06:36.382682487-03:00","closed_at":"2026-01-13T16:06:36.382682487-03:00","close_reason":"Closed","dependencies":[{"issue_id":"fabbro-ydd","depends_on_id":"fabbro-ywn","type":"blocks","created_at":"2026-01-13T14:43:30.25965087-03:00","created_by":"charly vibes"}]}
{"id":"fabbro-ywn","title":"Create spec-coverage matrix with implementation status","description":"Create docs/spec-coverage.md listing each scenario from specs 01-06 with status: Implemented/Partial/Not Implemented/Deprecated. Use tracer+post-tracer plans to populate.","status":"closed","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:43:05.788469831-03:00","created_by":"charly vibes","updated_at":"2026-01-13T15:00:58.325064449-03:00","closed_at":"2026-01-13T15:00:58.325064449-03:00","close_reason":"Closed"}
{"id":"fabbro-zez","title":"We should evaluate a better way to handle multiple annotations in same regions, for example currently its creating nested annotations that will require a lot of logic to diagnose.","description":"Evaluate better ways to handle multiple annotations in the same code regions, specifically addressing the current issue of nested annotations which complicates diagnosis and processing.\n\n### Deliverable:\n- A short report (e.g., Markdown file) outlining:\n    - Analysis of current nested annotation problems.\n    - Research into common strategies for multi-annotation handling (e.g., layering, explicit conflict resolution, merging).\n    - Proposed solution(s) with pros, cons, and impact on FEM parsing/rendering.\n\n### Verification Steps:\n1. Review the generated report for completeness and clarity.\n2. Confirm that alternative strategies are explored and a proposal is made.\n3. Ensure the impact on existing FEM handling is considered.","status":"open","priority":2,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-19T19:26:57.971173732-03:00","created_by":"charly vibes","updated_at":"2026-01-19T19:42:17.595986537-03:00"}
{"id":"fabbro-zwk","title":"Canonicalize JSON schema for fabbro apply","description":"CRITICAL: Spec 04 uses sessionId, startLine/endLine; code uses session_id, line. This breaks Amp integration. Pick one schema, update spec + FEM struct + tracer docs.","status":"closed","priority":1,"issue_type":"task","owner":"charly.vibes@proton.me","created_at":"2026-01-13T14:42:50.09813715-03:00","created_by":"charly vibes","updated_at":"2026-01-13T14:52:03.710134335-03:00","closed_at":"2026-01-13T14:52:03.710134335-03:00","close_reason":"Closed"}
